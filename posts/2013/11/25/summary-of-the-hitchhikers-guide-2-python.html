<!DOCTYPE html>
<html lang="en">

<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta name="google-site-verification" content="SzE6WCs23qFevgBzRIuG9vcfLU0lW_Vd5hFT-cJOLBE" />
    <title>[摘要]Python 最佳实践指南</title>
    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/theme/css/styles.css" media="all" />
        <link rel="stylesheet" href="/theme/css/monokai.css" media="all" />
        <link rel="stylesheet" href="/theme/css/tab.min.css" media="all" />
        <link rel="stylesheet" href="/theme/css/jquery-ui.min.css" media="all" />

        <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
        <!--
        <link rel="stylesheet" href="http://apps.bdimg.com/libs/fontawesome/4.2.0/css/font-awesome.min.css">
        -->
        <!--[if IE 7]>
            <link rel="stylesheet" href="/theme/css/font-awesome-ie7.min.css">
        <![endif]-->

        <link href="/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
        <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />

</head>

<body>
    <div id="page" class="row">
        <div class="large-9 large-centered columns">

        <header id="header">
            <div class="constraint">
                <div class="o">
                    <a href="/"><h1 class="banner">Wklken <span class="blue"> Building </span></h1></a>

                <div class="social">
                            <a href="https://github.com/wklken" target='_blank'><i class="icon-github-sign icon-2x"></i></a>
                            <a href="http://weibo.com/wklken" target='_blank'><i class="icon-weibo icon-2x"></i></a>
                            <a href="mailto:wklken@yeah.net"><i class="icon-envelope icon-2x"></i></a>
                            <a href="http://www.wklken.me/feed.xml" target='_blank'><i class="icon-rss-sign icon-2x"></i></a>
                </div>
                <div class="nav">
                            <a href="/">首页</a>
                            <a href="/categories.html">分类</a>
                            <a href="/archives.html">归档</a>
                            <a href="/pages/projects.html">项目</a>
                            <a href="/pages/links.html">友链</a>
                            <a href="/pages/aboutme.html">关于</a>

                </div>

                </div>
            </div>
        </header><!-- /#banner -->

        <section id="main">


<article id="article">
    <section id="header">
        <!--
        <div class="meta">2013年11月25日</div>
        <h1 id="title"> [摘要]Python 最佳实践指南 </h1>
        -->
        <div class="meta"> &nbsp; </div>
        <h1> [摘要]Python 最佳实践指南 </h1>
    </section>

        <section id="toc">
            <div id="toc"><ul><li><a class="toc-href" href="#" title="[摘要]Python 最佳实践指南">[摘要]Python 最佳实践指南</a><ul><li><a class="toc-href" href="#di-ling-bu-fen-getting-started" title="第零部分 Getting Started">第零部分 Getting Started</a></li><li><a class="toc-href" href="#di-yi-bu-fen-writing-great-code" title="第一部分 Writing Great Code">第一部分 Writing Great Code</a><ul><li><a class="toc-href" href="#structuring-your-project" title="Structuring Your Project">Structuring Your Project</a></li><li><a class="toc-href" href="#code-style" title="Code Style">Code Style</a><ul><li><a class="toc-href" href="#yi-ban-gai-nian-general-concepts" title="一般概念(General concepts)">一般概念(General concepts)</a></li><li><a class="toc-href" href="#fang-yan-idioms" title="方言(Idioms)">方言(Idioms)</a></li></ul></li><li><a class="toc-href" href="#guan-li-conventions_1" title="惯例(Conventions)">惯例(Conventions)</a></li><li><a class="toc-href" href="#reading-great-code" title="Reading Great Code">Reading Great Code</a></li><li><a class="toc-href" href="#wen-dang-documentation" title="文档(Documentation)">文档(Documentation)</a></li><li><a class="toc-href" href="#ce-shi-ni-de-dai-ma-testing-your-code" title="测试你的代码(Testing Your Code)">测试你的代码(Testing Your Code)</a></li><li><a class="toc-href" href="#common-gotchasbu-dong-zen-yao-fan-v" title="Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )">Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )</a></li><li><a class="toc-href" href="#xuan-ze-zheng-shu-choosing-a-license" title="选择证书(Choosing a License)">选择证书(Choosing a License)</a></li></ul></li><li><a class="toc-href" href="#di-er-bu-fen-scenario-guide_1" title="第二部分 Scenario Guide">第二部分 Scenario Guide</a><ul><li><a class="toc-href" href="#network-applications" title="Network Applications">Network Applications</a></li><li><a class="toc-href" href="#web-applications" title="Web Applications">Web Applications</a></li><li><a class="toc-href" href="#html-scraping" title="HTML Scraping">HTML Scraping</a></li><li><a class="toc-href" href="#command-line-applications" title="Command Line Applications">Command Line Applications</a></li><li><a class="toc-href" href="#gui-applications" title="GUI Applications">GUI Applications</a></li><li><a class="toc-href" href="#databases" title="Databases">Databases</a></li><li><a class="toc-href" href="#networking" title="Networking">Networking</a></li><li><a class="toc-href" href="#systems-administration" title="Systems Administration">Systems Administration</a></li><li><a class="toc-href" href="#continuous-integration" title="Continuous Integration">Continuous Integration</a></li><li><a class="toc-href" href="#speed" title="Speed">Speed</a></li><li><a class="toc-href" href="#scientific-applications" title="Scientific Applications">Scientific Applications</a></li><li><a class="toc-href" href="#image-manipulation" title="Image Manipulation">Image Manipulation</a></li><li><a class="toc-href" href="#xml-parsing" title="XML parsing">XML parsing</a></li></ul></li><li><a class="toc-href" href="#di-san-bu-fen-shipping-great-code_1" title="第三部分 Shipping Great Code">第三部分 Shipping Great Code</a></li><li><a class="toc-href" href="#di-si-bu-fen-development-environment" title="第四部分 Development Environment">第四部分 Development Environment</a></li><li><a class="toc-href" href="#di-wu-bu-fen-additional-notes" title="第五部分 Additional Notes">第五部分 Additional Notes</a></li></ul></li></ul></div>
        </section>
    <section id="content">
        <p>文档地址 <a href="http://docs.python-guide.org/en/latest/">The Hitchhiker's Guide to Python!</a></p>
<p>这份文档</p>
<div class="monokai"><pre><span class="code-line"><span></span>目标对象：入门后，有一定基础的Pythonista</span>
<span class="code-line">关键词：最佳实践，Pythonic，各类工具介绍</span>
</pre></div>
<p>粗粗粗略地过了一遍，大体捞了一些东西出来，大段大段英文太费眼了，回头细读在更新进来</p>
<p>浓缩版，20分钟可大体过完，然后根据自己需要去看详细的吧</p>
<p>整体内容还是很不错的，建议细读英文</p>
<p>PS:文档含有巨量的TODO(没写空白着待补充的)，不过但从目录上来看还是很强大滴，相信完善后，会成为一份很牛逼的指南(难度比官方指南高一点点)</p>
<hr/>
<h1 id="di-ling-bu-fen-getting-started">第零部分 Getting Started</h1>
<p><a href="http://docs.python-guide.org/en/latest/#getting-started">链接</a></p>
<p>不解释，不翻译，自个看....真的没啥(每本入门书籍第一章...)</p>
<hr/>
<h1 id="di-yi-bu-fen-writing-great-code">第一部分 Writing Great Code</h1>
<h3 id="structuring-your-project">Structuring Your Project</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/structure/#structuring-your-project">链接</a></p>
<p>import 最佳实践</p>
<p>Very bad</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="k">[...]</span></span>
<span class="code-line"><span class="err">from</span> <span class="err">modu</span> <span class="err">import</span> <span class="err">*</span></span>
<span class="code-line"><span class="k">[...]</span></span>
<span class="code-line"><span class="na">x</span> <span class="o">=</span> <span class="s">sqrt(4)  # Is sqrt part of modu? A builtin? Defined above?</span></span>
</pre></div>
<p>Better</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="kn">from</span> <span class="nn">modu</span> <span class="kn">import</span> <span class="n">sqrt</span></span>
<span class="code-line"><span class="p">[</span><span class="o">...</span><span class="p">]</span></span>
<span class="code-line"><span class="n">x</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># sqrt may be part of modu, if not redefined in between</span></span>
</pre></div>
<p>Best</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="kn">import</span> <span class="nn">modu</span></span>
<span class="code-line"><span class="p">[</span><span class="o">...</span><span class="p">]</span></span>
<span class="code-line"><span class="n">x</span> <span class="o">=</span> <span class="n">modu</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># sqrt is visibly part of modu's namespace</span></span>
</pre></div>
<p>Python中关于OOP的 <a href="http://docs.python-guide.org/en/latest/writing/structure/#object-oriented-programming">观点</a></p>
<p>Decorators</p>
<div class="monokai"><pre><span class="code-line"><span></span>def foo():</span>
<span class="code-line">    # do something</span>
<span class="code-line"></span>
<span class="code-line">def decorator(func):</span>
<span class="code-line">    # manipulate func</span>
<span class="code-line">    return func</span>
<span class="code-line"></span>
<span class="code-line">foo = decorator(foo)  # Manually decorate</span>
<span class="code-line"></span>
<span class="code-line">@decorator</span>
<span class="code-line">def bar():</span>
<span class="code-line">    # Do something</span>
<span class="code-line"># bar() is decorated</span>
</pre></div>
<p>动态类型(Dynamic typing)</p>
<p>Avoid using the same variable name for different things.</p>
<p>Bad</p>
<div class="monokai"><pre><span class="code-line"><span></span>a = 1</span>
<span class="code-line">a = 'a string'</span>
<span class="code-line">def a():</span>
<span class="code-line">    pass  # Do something</span>
</pre></div>
<p>Good</p>
<div class="monokai"><pre><span class="code-line"><span></span>count = 1</span>
<span class="code-line">msg = 'a string'</span>
<span class="code-line">def func():</span>
<span class="code-line">    pass  # Do something</span>
</pre></div>
<p>It is better to use different names even for things that are related, when they have a different type:</p>
<div class="monokai"><pre><span class="code-line"><span></span>Bad</span>
<span class="code-line"></span>
<span class="code-line">items = 'a b c d'  # This is a string...</span>
<span class="code-line">items = items.split(' ')  # ...becoming a list</span>
<span class="code-line">items = set(items)  # ...and then a set</span>
</pre></div>
<p>可变和不可变类型(Mutable and immutable types)</p>
<p>字符串拼接最佳实践</p>
<p>Bad</p>
<div class="monokai"><pre><span class="code-line"><span></span># create a concatenated string from 0 to 19 (e.g. "012..1819")</span>
<span class="code-line">nums = ""</span>
<span class="code-line">for n in range(20):</span>
<span class="code-line">  nums += str(n)   # slow and inefficient</span>
<span class="code-line">print nums</span>
</pre></div>
<p>Good</p>
<div class="monokai"><pre><span class="code-line"><span></span># create a concatenated string from 0 to 19 (e.g. "012..1819")</span>
<span class="code-line">nums = []</span>
<span class="code-line">for n in range(20):</span>
<span class="code-line">  nums.append(str(n))</span>
<span class="code-line">print "".join(nums)  # much more efficient</span>
</pre></div>
<p>Best</p>
<div class="monokai"><pre><span class="code-line"><span></span># create a concatenated string from 0 to 19 (e.g. "012..1819")</span>
<span class="code-line">nums = [str(n) for n in range(20)]</span>
<span class="code-line">print "".join(nums)</span>
</pre></div>
<p>join() is not always best
创建新字符串和修改原有字符串</p>
<div class="monokai"><pre><span class="code-line"><span></span>foo = 'foo'</span>
<span class="code-line">bar = 'bar'</span>
<span class="code-line"></span>
<span class="code-line">foobar = foo + bar  # This is good</span>
<span class="code-line">foo += 'ooo'  # This is bad, instead you should do:</span>
<span class="code-line">foo = ''.join([foo, 'ooo'])</span>
</pre></div>
<p>字符串格式化</p>
<div class="monokai"><pre><span class="code-line"><span></span>foo = 'foo'</span>
<span class="code-line">bar = 'bar'</span>
<span class="code-line"></span>
<span class="code-line">foobar = '%s%s' % (foo, bar) # It is OK</span>
<span class="code-line">foobar = '{0}{1}'.format(foo, bar) # It is better</span>
<span class="code-line">foobar = '{foo}{bar}'.format(foo=foo, bar=bar) # It is best</span>
</pre></div>
<h3 id="code-style">Code Style</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/style/#code-style">链接</a></p>
<h4 id="yi-ban-gai-nian-general-concepts">一般概念(General concepts)</h4>
<p>明确的代码</p>
<p>Bad</p>
<div class="monokai"><pre><span class="code-line"><span></span>def make_complex(*args):</span>
<span class="code-line">    x, y = args</span>
<span class="code-line">    return dict(**locals())</span>
</pre></div>
<p>Good</p>
<div class="monokai"><pre><span class="code-line"><span></span>def make_complex(x, y):</span>
<span class="code-line">    return {'x': x, 'y': y}</span>
</pre></div>
<p>每行一个声明</p>
<p>Bad</p>
<div class="monokai"><pre><span class="code-line"><span></span>print 'one'; print 'two'</span>
<span class="code-line"></span>
<span class="code-line">if x == 1: print 'one'</span>
<span class="code-line"></span>
<span class="code-line">if &lt;complex comparison&gt; and &lt;other complex comparison&gt;:</span>
<span class="code-line">    # do something</span>
</pre></div>
<p>Good</p>
<div class="monokai"><pre><span class="code-line"><span></span>print 'one'</span>
<span class="code-line">print 'two'</span>
<span class="code-line"></span>
<span class="code-line">if x == 1:</span>
<span class="code-line">    print 'one'</span>
<span class="code-line"></span>
<span class="code-line">cond1 = &lt;complex comparison&gt;</span>
<span class="code-line">cond2 = &lt;other complex comparison&gt;</span>
<span class="code-line">if cond1 and cond2:</span>
<span class="code-line">    # do something</span>
</pre></div>
<p>函数参数</p>
<div class="monokai"><pre><span class="code-line"><span></span>#不解释了</span>
<span class="code-line">位置参数，默认参数，*args, **args</span>
</pre></div>
<p>Avoid the magical wand(这个肿么翻...)</p>
<div class="monokai"><pre><span class="code-line"><span></span>原因：</span>
<span class="code-line">Python comes with a very rich set of hooks and tools allowing to do almost any kind of tricky tricks</span>
<span class="code-line"></span>
<span class="code-line">建议：</span>
<span class="code-line">it is always better to use the most straightforward way to achieve your goal</span>
<span class="code-line"></span>
<span class="code-line">感受一下:</span>
<span class="code-line">We consider that a Python developer should know about these nearly infinite possibilities,</span>
<span class="code-line">because it grows the confidence that no hard-wall will be on the way.</span>
<span class="code-line">However, knowing how to use them and particularly when not to use them is the most important.</span>
<span class="code-line"></span>
<span class="code-line">Like a Kungfu master, a Pythonista knows how to kill with a single finger, and never to actually do it.</span>
<span class="code-line"></span>
<span class="code-line">其实就是告诉你，骚年，这玩意你要去学习去了解去掌握，目的是增强实力保持自信，但是不要去用啊</span>
<span class="code-line">(说的原子弹吧....)</span>
</pre></div>
<h4 id="fang-yan-idioms">方言(Idioms)</h4>
<p>Idiomatic Python code is often referred to as being Pythonic.</p>
<p>列举了一些：</p>
<p>Unpacking</p>
<div class="monokai"><pre><span class="code-line"><span></span>for index, item in enumerate(some_list):</span>
<span class="code-line">    # do something with index and item</span>
<span class="code-line"></span>
<span class="code-line">a, b = b, a</span>
<span class="code-line"></span>
<span class="code-line">a, (b, c) = 1, (2, 3)</span>
</pre></div>
<p>忽略接收变量,这里用的是两个下划线，原因
http://docs.python-guide.org/en/latest/writing/style/#create-an-ignored-variable</p>
<div class="monokai"><pre><span class="code-line"><span></span>filename = 'foobar.txt'</span>
<span class="code-line">basename, __, ext = filename.rpartition('.')</span>
</pre></div>
<p>同一个元素创建一个长度为N的列表</p>
<div class="monokai"><pre><span class="code-line"><span></span>four_nones = [None] * 4</span>
</pre></div>
<p>创建一个长度N的嵌套列表</p>
<div class="monokai"><pre><span class="code-line"><span></span>four_lists = [[] for __ in xrange(4)]</span>
</pre></div>
<p>由列表拼接字符串</p>
<div class="monokai"><pre><span class="code-line"><span></span>letters = ['s', 'p', 'a', 'm']</span>
<span class="code-line">word = ''.join(letters)</span>
</pre></div>
<p>快速查找</p>
<div class="monokai"><pre><span class="code-line"><span></span>d = {'s': [], 'p': [], 'a': [], 'm': []}</span>
<span class="code-line">l = ['s', 'p', 'a', 'm']</span>
<span class="code-line"></span>
<span class="code-line">def lookup_dict(d): #O(1)</span>
<span class="code-line">    return 's' in d</span>
<span class="code-line"></span>
<span class="code-line">def lookup_list(l): #O(n)</span>
<span class="code-line">    return 's' in l</span>
</pre></div>
<p>Zen of Python</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="kn">import</span> <span class="nn">this</span></span>
</pre></div>
<p>PEP8</p>
<div class="monokai"><pre><span class="code-line"><span></span>$ pip install pep8</span>
<span class="code-line">$ pep8 optparse.py</span>
<span class="code-line">optparse.py:69:11: E401 multiple imports on one line</span>
<span class="code-line">optparse.py:77:1: E302 expected <span class="m">2</span> blank lines, found 1</span>
</pre></div>
<h3 id="guan-li-conventions_1">惯例(Conventions)</h3>
<p>判断值是否等于常量</p>
<p>Bad:</p>
<div class="monokai"><pre><span class="code-line"><span></span>if attr == True:</span>
<span class="code-line">    print 'True!'</span>
<span class="code-line"></span>
<span class="code-line">if attr == None:</span>
<span class="code-line">    print 'attr is None!'</span>
</pre></div>
<p>Good:</p>
<div class="monokai"><pre><span class="code-line"><span></span># Just check the value</span>
<span class="code-line">if attr:</span>
<span class="code-line">    print 'attr is truthy!'</span>
<span class="code-line"></span>
<span class="code-line"># or check for the opposite</span>
<span class="code-line">if not attr:</span>
<span class="code-line">    print 'attr is falsey!'</span>
<span class="code-line"></span>
<span class="code-line"># or, since None is considered false, explicitly check for it</span>
<span class="code-line">if attr is None:</span>
<span class="code-line">    print 'attr is None!'</span>
</pre></div>
<p>获取字典元素</p>
<p>Bad:</p>
<div class="monokai"><pre><span class="code-line"><span></span>d = {'hello': 'world'}</span>
<span class="code-line">if d.has_key('hello'):</span>
<span class="code-line">    print d['hello']    # prints 'world'</span>
<span class="code-line">else:</span>
<span class="code-line">    print 'default_value'</span>
</pre></div>
<p>Good:</p>
<div class="monokai"><pre><span class="code-line"><span></span>d = {'hello': 'world'}</span>
<span class="code-line"></span>
<span class="code-line">print d.get('hello', 'default_value') # prints 'world'</span>
<span class="code-line">print d.get('thingy', 'default_value') # prints 'default_value'</span>
<span class="code-line"></span>
<span class="code-line"># Or:</span>
<span class="code-line">if 'hello' in d:</span>
<span class="code-line">    print d['hello']</span>
</pre></div>
<p>快捷列表操作</p>
<p>Bad:</p>
<div class="monokai"><pre><span class="code-line"><span></span># Filter elements greater than 4</span>
<span class="code-line">a = [3, 4, 5]</span>
<span class="code-line">b = []</span>
<span class="code-line">for i in a:</span>
<span class="code-line">    if i &gt; 4:</span>
<span class="code-line">        b.append(i)</span>
</pre></div>
<p>Good:</p>
<div class="monokai"><pre><span class="code-line"><span></span>a = [3, 4, 5]</span>
<span class="code-line">b = [i for i in a if i &gt; 4]</span>
<span class="code-line">b = filter(lambda x: x &gt; 4, a)</span>
</pre></div>
<p>Bad:</p>
<div class="monokai"><pre><span class="code-line"><span></span># Add three to all list members.</span>
<span class="code-line">a = [3, 4, 5]</span>
<span class="code-line">for i in range(len(a)):</span>
<span class="code-line">    a[i] += 3</span>
</pre></div>
<p>Good:</p>
<div class="monokai"><pre><span class="code-line"><span></span>a = [3, 4, 5]</span>
<span class="code-line">a = [i + 3 for i in a]</span>
<span class="code-line"># Or:</span>
<span class="code-line">a = map(lambda i: i + 3, a)</span>
</pre></div>
<p>使用enumerate</p>
<div class="monokai"><pre><span class="code-line"><span></span>for i, item in enumerate(a):</span>
<span class="code-line">    print i, item</span>
<span class="code-line"># prints</span>
<span class="code-line"># 0 3</span>
<span class="code-line"># 1 4</span>
<span class="code-line"># 2 5</span>
</pre></div>
<p>读文件</p>
<p>Bad:</p>
<div class="monokai"><pre><span class="code-line"><span></span>f = open('file.txt')</span>
<span class="code-line">a = f.read()</span>
<span class="code-line">print a</span>
<span class="code-line">f.close()</span>
</pre></div>
<p>Good:</p>
<div class="monokai"><pre><span class="code-line"><span></span>with open('file.txt') as f:</span>
<span class="code-line">    for line in f:</span>
<span class="code-line">        print line</span>
</pre></div>
<p>超长的行</p>
<p>Bad:</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="n">my_very_big_string</span> <span class="o">=</span> <span class="s2">"""For a long time I used to go to bed early. Sometimes, </span><span class="se">\</span></span>
<span class="code-line"><span class="s2">    when I had put out my candle, my eyes would close so quickly that I had not even </span><span class="se">\</span></span>
<span class="code-line"><span class="s2">    time to say “I’m going to sleep.”"""</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">some.deep.module.inside.a.module</span> <span class="kn">import</span> <span class="n">a_nice_function</span><span class="p">,</span> <span class="n">another_nice_function</span><span class="p">,</span> \</span>
<span class="code-line">    <span class="n">yet_another_nice_function</span></span>
</pre></div>
<p>Good:</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="c1">#受教了....</span></span>
<span class="code-line"><span class="n">my_very_big_string</span> <span class="o">=</span> <span class="p">(</span></span>
<span class="code-line">    <span class="s2">"For a long time I used to go to bed early. Sometimes, "</span></span>
<span class="code-line">    <span class="s2">"when I had put out my candle, my eyes would close so quickly "</span></span>
<span class="code-line">    <span class="s2">"that I had not even time to say “I’m going to sleep.”"</span></span>
<span class="code-line"><span class="p">)</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">some.deep.module.inside.a.module</span> <span class="kn">import</span> <span class="p">(</span></span>
<span class="code-line">    <span class="n">a_nice_function</span><span class="p">,</span> <span class="n">another_nice_function</span><span class="p">,</span> <span class="n">yet_another_nice_function</span><span class="p">)</span></span>
</pre></div>
<h3 id="reading-great-code">Reading Great Code</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/reading/#reading-great-code">链接</a></p>
<p>感受下：The number one thing that Python programmers do is read code.</p>
<p>再感受一把：One of the secrets of becoming a great Python programmer is to read, understand, and comprehend excellent code.</p>
<p>几个推荐阅读源代码项目</p>
<p><a href="https://github.com/gleitz/howdoi">Howdoi</a></p>
<p><a href="https://github.com/mitsuhiko/flask">Flask</a></p>
<p><a href="https://github.com/mitsuhiko/werkzeug">Werkzeug</a></p>
<p><a href="https://github.com/kennethreitz/requests">Requests</a></p>
<p><a href="https://github.com/kennethreitz/tablib">Tablib</a></p>
<h3 id="wen-dang-documentation">文档(Documentation)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/documentation/#documentation">链接</a></p>
<p>感受一下：Readability is a primary focus for Python developers, in both project and code documentation.</p>
<p>具体还是读原文吧</p>
<p>项目文档组成</p>
<div class="monokai"><pre><span class="code-line"><span></span>1.A README file</span>
<span class="code-line">  at the root directory should give general information to the users and the maintainers.</span>
<span class="code-line"></span>
<span class="code-line">  reStructuredText 或 Markdown</span>
<span class="code-line">2.An INSTALL file</span>
<span class="code-line">  is less necessary with python</span>
<span class="code-line"></span>
<span class="code-line">  setup.py</span>
<span class="code-line"></span>
<span class="code-line">3.A LICENSE file</span>
<span class="code-line">  should always be present and specify the license under which the software is made available to the public</span>
<span class="code-line">4.A TODO file or a TODO section in README</span>
<span class="code-line">  should list the planned development for the code.</span>
<span class="code-line">5.A CHANGELOG file or section in README</span>
<span class="code-line">  should compile a short overview of the changes in the code base for the latest versions.</span>
</pre></div>
<p>几种文档工具</p>
<div class="monokai"><pre><span class="code-line"><span></span>Sphinx(听说最强大....)</span>
<span class="code-line">reStructuredText</span>
<span class="code-line">Markdown(俺的最爱...)</span>
</pre></div>
<p>代码文档建议</p>
<p>Comments clarify code and begin with a hash (#).</p>
<p>In Python, docstrings describe modules, classes, and functions:</p>
<div class="monokai"><pre><span class="code-line"><span></span>def square_and_rooter(x):</span>
<span class="code-line">    """Returns the square root of self times self."""</span>
</pre></div>
<p>注解代码块</p>
<p>Do not use triple-quote strings to comment code.</p>
<p>This is not a good practice, because line-oriented command-line tools such as grep will not be aware that the commented code is inactive.</p>
<p>It is better to add hashes at the proper indentation level for every commented line.</p>
<p>最佳实践:</p>
<div class="monokai"><pre><span class="code-line"><span></span>不用三引号注解代码块</span>
<span class="code-line">每一行加#来注释</span>
</pre></div>
<h3 id="ce-shi-ni-de-dai-ma-testing-your-code">测试你的代码(Testing Your Code)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/tests/#testing-your-code">链接</a></p>
<p>测试一些通用原则</p>
<div class="monokai"><pre><span class="code-line"><span></span>1.A testing unit should focus on one tiny bit of functionality and prove it correct.</span>
<span class="code-line">2.Each test unit must be fully independent</span>
<span class="code-line">3.Try hard to make tests that run fast</span>
<span class="code-line">4.Learn your tools and learn how to run a single test or a test case</span>
<span class="code-line">5.Always run the full test suite before a coding session, and run it again after.</span>
<span class="code-line">6.It is a good idea to implement a hook that runs all tests before pushing code to a shared repository.</span>
<span class="code-line">7.If you are in the middle of a development session and have to interrupt your work,</span>
<span class="code-line">  it is a good idea to write a broken unit test about what you want to develop next.</span>
<span class="code-line">8.The first step when you are debugging your code is to write a new test pinpointing the bug.</span>
<span class="code-line">9.Use long and descriptive names for testing functions</span>
<span class="code-line">10.When something goes wrong or has to be changed, and if your code has a good set of tests,</span>
<span class="code-line">  you or other maintainers will rely largely on the testing suite to fix the problem or modify a given behavior.</span>
<span class="code-line">11.Another use of the testing code is as an introduction to new developers.</span>
</pre></div>
<p>单元测试(Unittest)</p>
<p>Python内置模块, <a href="http://docs.python.org/library/unittest.html">文档</a></p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="kn">import</span> <span class="nn">unittest</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">):</span></span>
<span class="code-line">    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span></span>
<span class="code-line">    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></span>
<span class="code-line">        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fun</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span></span>
</pre></div>
<p>文档测试(Doctest)</p>
<p>非精细case，只验证主体功能可用</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span></span>
<span class="code-line">    <span class="sd">"""Squares x.</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="sd">    &gt;&gt;&gt; square(2)</span></span>
<span class="code-line"><span class="sd">    4</span></span>
<span class="code-line"><span class="sd">    &gt;&gt;&gt; square(-2)</span></span>
<span class="code-line"><span class="sd">    4</span></span>
<span class="code-line"><span class="sd">    """</span></span>
<span class="code-line"></span>
<span class="code-line">    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span></span>
<span class="code-line">    <span class="kn">import</span> <span class="nn">doctest</span></span>
<span class="code-line">    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span></span>
</pre></div>
<p>相关工具</p>
<p><a href="http://pytest.org/latest/">py.text</a>
    $ pip install pytest</p>
<p><a href="http://readthedocs.org/docs/nose/en/latest/">Nose</a> unittest的扩展
    $ pip install nose</p>
<p><a href="http://testrun.org/tox/latest/">tox</a>
    $ pip install tox</p>
<p><a href="http://pypi.python.org/pypi/unittest2">Unittest2</a>
    $ pip install unittest2</p>
<p><a href="http://www.voidspace.org.uk/python/mock/">mock</a>
    $ pip install mock</p>
<h3 id="common-gotchasbu-dong-zen-yao-fan-v">Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )</h3>
<p>一些新手可能疑惑的例子</p>
<p>两个例子</p>
<p>1.可变默认参数</p>
<p>What You Wrote</p>
<div class="monokai"><pre><span class="code-line"><span></span>def append_to(element, to=[]):</span>
<span class="code-line">    to.append(element)</span>
<span class="code-line">    return to</span>
</pre></div>
<p>What You Might Have Expected to Happen</p>
<div class="monokai"><pre><span class="code-line"><span></span>my_list = append_to(12)</span>
<span class="code-line">print my_list</span>
<span class="code-line"></span>
<span class="code-line">my_other_list = append_to(42)</span>
<span class="code-line">print my_other_list</span>
<span class="code-line"></span>
<span class="code-line">[12]</span>
<span class="code-line">[42]</span>
</pre></div>
<p>What Does Happen</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="k">[12]</span></span>
<span class="code-line"><span class="k">[12, 42]</span></span>
</pre></div>
<p>What You Should Do Instead</p>
<div class="monokai"><pre><span class="code-line"><span></span>def append_to(element, to=None):</span>
<span class="code-line">    if to is None:</span>
<span class="code-line">        to = []</span>
<span class="code-line">    to.append(element)</span>
<span class="code-line">    return to</span>
</pre></div>
<p>Python默认参数在函数定义处执行一次，而不是每次函数调用时执行。</p>
<p>2.Late Binding Closures(又一个，延迟绑定闭包?)</p>
<p>What You Wrote</p>
<div class="monokai"><pre><span class="code-line"><span></span>def create_multipliers():</span>
<span class="code-line">    return [lambda x : i * x for i in range(5)] #</span>
</pre></div>
<p>What You Might Have Expected to Happen</p>
<div class="monokai"><pre><span class="code-line"><span></span>for multiplier in create_multipliers():</span>
<span class="code-line">    print multiplier(2) # 任意一个返回的函数被调用时，内部循环i=4</span>
<span class="code-line"></span>
<span class="code-line">0</span>
<span class="code-line">2</span>
<span class="code-line">4</span>
<span class="code-line">6</span>
<span class="code-line">8</span>
</pre></div>
<p>What Does Happen</p>
<div class="monokai"><pre><span class="code-line"><span></span>8</span>
<span class="code-line">8</span>
<span class="code-line">8</span>
<span class="code-line">8</span>
<span class="code-line">8</span>
</pre></div>
<p>What You Should Do Instead</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span></span>
<span class="code-line"><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">mul</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">def</span> <span class="nf">create_multipliers</span><span class="p">():</span></span>
<span class="code-line">    <span class="k">return</span> <span class="p">[</span><span class="n">partial</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span></span>
</pre></div>
<p>Python的闭包是延时绑定</p>
<h3 id="xuan-ze-zheng-shu-choosing-a-license">选择证书(Choosing a License)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/license/#choosing-a-license">链接</a></p>
<p>开源证书 <a href="http://opensource.org/licenses/alphabetical">列表</a></p>
<p>证书选择器 <a href="http://three.org/openart/license_chooser/">入口</a></p>
<hr/>
<h1 id="di-er-bu-fen-scenario-guide_1">第二部分 Scenario Guide</h1>
<p>都是介绍性质的，类似工具目录,而且大部分是空的，目前没详细信息</p>
<p>要了解具体，goole相关关键词吧</p>
<p>具体自己翻吧 <a href="http://docs.python-guide.org/en/latest/#scenario-guide">位置</a></p>
<p>目录：</p>
<h3 id="network-applications">Network Applications</h3>
<p>Http:</p>
<div class="monokai"><pre><span class="code-line"><span></span>Requests</span>
</pre></div>
<p>Distributed Systems</p>
<div class="monokai"><pre><span class="code-line"><span></span>ZeroMQ</span>
<span class="code-line">RabbitMQ</span>
</pre></div>
<h3 id="web-applications">Web Applications</h3>
<p>Context</p>
<div class="monokai"><pre><span class="code-line"><span></span>WSGI</span>
</pre></div>
<p>Frameworks</p>
<div class="monokai"><pre><span class="code-line"><span></span>Django</span>
<span class="code-line">Flask</span>
<span class="code-line">Werkzeug</span>
<span class="code-line">Tornado</span>
<span class="code-line">Pyramid</span>
</pre></div>
<p>Web Servers</p>
<div class="monokai"><pre><span class="code-line"><span></span>Nginx</span>
</pre></div>
<p>WSGI Servers</p>
<div class="monokai"><pre><span class="code-line"><span></span>Gunicorn</span>
</pre></div>
<p>Hosting</p>
<div class="monokai"><pre><span class="code-line"><span></span>PasS (Platform as a service)</span>
<span class="code-line">Heroku</span>
<span class="code-line">DotCloud</span>
<span class="code-line">Gondor</span>
</pre></div>
<p>Templating</p>
<div class="monokai"><pre><span class="code-line"><span></span>Jinja2</span>
</pre></div>
<h3 id="html-scraping">HTML Scraping</h3>
<div class="monokai"><pre><span class="code-line"><span></span>lxml</span>
<span class="code-line">Requests</span>
</pre></div>
<h3 id="command-line-applications">Command Line Applications</h3>
<div class="monokai"><pre><span class="code-line"><span></span>Clint</span>
<span class="code-line">docopt</span>
</pre></div>
<h3 id="gui-applications">GUI Applications</h3>
<div class="monokai"><pre><span class="code-line"><span></span>Qt</span>
<span class="code-line">Cocoa</span>
<span class="code-line">wxPython</span>
<span class="code-line">GTk</span>
<span class="code-line">Tk</span>
<span class="code-line">Kivy</span>
<span class="code-line">PyjamasDesktop (pyjs Desktop)</span>
<span class="code-line">Camelot</span>
</pre></div>
<h3 id="databases">Databases</h3>
<div class="monokai"><pre><span class="code-line"><span></span>DB-API</span>
<span class="code-line">SQLAlchemy</span>
<span class="code-line">Django ORM</span>
</pre></div>
<h3 id="networking">Networking</h3>
<div class="monokai"><pre><span class="code-line"><span></span>Twisted</span>
<span class="code-line">PyZMQ</span>
<span class="code-line">gevent</span>
</pre></div>
<h3 id="systems-administration">Systems Administration</h3>
<div class="monokai"><pre><span class="code-line"><span></span>Fabric</span>
<span class="code-line">Salt</span>
<span class="code-line">Psutil</span>
<span class="code-line">Chef</span>
<span class="code-line">Puppet</span>
<span class="code-line">Blueprint</span>
<span class="code-line">Buildout</span>
</pre></div>
<h3 id="continuous-integration">Continuous Integration</h3>
<div class="monokai"><pre><span class="code-line"><span></span>Jenkins</span>
<span class="code-line">Buildbot</span>
<span class="code-line">Mule?</span>
<span class="code-line">Tox</span>
<span class="code-line">Travis-CI</span>
</pre></div>
<h3 id="speed">Speed</h3>
<p>C Extensions</p>
<div class="monokai"><pre><span class="code-line"><span></span>GIL</span>
<span class="code-line">Cython</span>
<span class="code-line">Pyrex</span>
<span class="code-line">Shedskin</span>
<span class="code-line">Numba</span>
</pre></div>
<p>Threading</p>
<div class="monokai"><pre><span class="code-line"><span></span>Threading</span>
<span class="code-line">Multiprocessing</span>
</pre></div>
<h3 id="scientific-applications">Scientific Applications</h3>
<p>Tools</p>
<div class="monokai"><pre><span class="code-line"><span></span>IPython</span>
</pre></div>
<p>Libraries</p>
<div class="monokai"><pre><span class="code-line"><span></span>NumPy</span>
<span class="code-line">Numba</span>
<span class="code-line">SciPy</span>
<span class="code-line">Matplotlib</span>
<span class="code-line">Pandas</span>
<span class="code-line">Rpy2</span>
<span class="code-line">PsychoPy</span>
</pre></div>
<h3 id="image-manipulation">Image Manipulation</h3>
<div class="monokai"><pre><span class="code-line"><span></span>Python Imaging Library(PIL)</span>
</pre></div>
<h3 id="xml-parsing">XML parsing</h3>
<div class="monokai"><pre><span class="code-line"><span></span>untangle</span>
<span class="code-line">xmltodict</span>
</pre></div>
<hr/>
<p>有需要自取.....</p>
<h1 id="di-san-bu-fen-shipping-great-code_1">第三部分 Shipping Great Code</h1>
<p>http://docs.python-guide.org/en/latest/#shipping-great-code</p>
<h1 id="di-si-bu-fen-development-environment">第四部分 Development Environment</h1>
<p>http://docs.python-guide.org/en/latest/#development-environment</p>
<h1 id="di-wu-bu-fen-additional-notes">第五部分 Additional Notes</h1>
<p>http://docs.python-guide.org/en/latest/#additional-notes</p>
<hr/>
<p>The end!</p>
<p>2013-11-25</p>
<p>wklken</p>
    </section>

    <section id="copyright">
        <div class="copyright">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        </div>

        <div class="donation">
            <center>
                <div style="width: 70%;">
                    <img src="/imgs/life/donation_w.png" style=""/>
                    <strong>
                        <div style="text-align:center;">
                            如果我的文章或项目对你有所帮助, 可以扫码进行小额捐赠<br>
                            如果有主机需求, 可点下方vultr进入注册, 带小尾巴:)<br>
                            如果要加广告位, 请邮件联系<br>
                        </ol>
                    </strong>
                </div>
            </center>

        </div>
    </section>


    <section id="neighbors">
        <div>
                        <a class="left" href="http://www.wklken.me/posts/2013/11/24/the-clean-coder.html">
                            上一篇:  读书笔记-程序员的职业素养
                        </a>
                        <a class="right" href="http://www.wklken.me/posts/2013/12/01/git-base.html">
                            下一篇: Git操作小结
                        </a>
        </div>
    </section>

    <section id="ad">
        <!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
        <!-- [> blog_ad_003 <] -->
        <!-- <ins class="adsbygoogle" -->
            <!-- style="display:block" -->
            <!-- data-ad-client="ca-pub-7635941258020589" -->
            <!-- data-ad-slot="7030416955" -->
            <!-- data-ad-format="auto"></ins> -->
        <!-- <script> -->
        <!-- (adsbygoogle = window.adsbygoogle || []).push({}); -->
        <!-- </script> -->

        <a href='http://www.vultr.com/?ref=6847203' target="_blank">
        <img src="/imgs/ads/vultr.png"> </img>
        </a>
    </section>



<section id="comments">
        <div class="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "posts/2013/11/25/summary-of-the-hitchhikers-guide-2-python.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://wklken.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            </div>
</section>



</article>
        </section><!--end #main-->

            <footer class="row">
                <div class="large-12 columns">
                    <p>
                            Copyright © 2015 wklken <br>
                            Hosted on <a href="http://www.vultr.com/?ref=6954153-3B"> vultr </a>. Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>.
                            <!-- Hosted on <a href="http://www.vultr.com/?ref=6847203"> vultr </a> Also <a href="https://www.digitalocean.com/?refcode=8ee73f2c47ce"> DigitalOcean </a>. Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>. -->
                    </p>
                </div>
            </footer>

            </div>
        </div>

        <section id="extras" class="body">
        </section><!-- /#extras -->



<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/jquery-scrollUp/2.1.0/jquery.scrollUp.min.js"></script>
<script src="http://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script>
    $(function(){
        $.scrollUp({
              scrollText: '', // Text for element, can contain HTML
            });
    });
</script>


<script type="text/javascript">
  /* var Swiftype = window.Swiftype || {}; */
  /* Swiftype.searchSearchFields = { */
    /* "page": ["title^10", "body"] */
  /* }; */

  /* (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){ */
  /* (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t); */
  /* e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e); */
  /* })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st'); */

  /* _st('install','v6K-_DamCeHvwX6z3o2F'); */
</script>



    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>




<div id="share">
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["mshare","tsina","weixin","douban","meilishuo","mogujie","youdao","sdo","mail","twi","copy","print"],"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"5","bdPos":"right","bdTop":"96.5"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>



<script  src="http://www.wklken.me/theme/js/scroll-header.js" type="text/javascript"></script>




</body>
</html>