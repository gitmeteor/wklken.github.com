<!DOCTYPE html>
<html lang="en">

<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta name="google-site-verification" content="SzE6WCs23qFevgBzRIuG9vcfLU0lW_Vd5hFT-cJOLBE" />
    <title>Linux Shell脚本攻略笔记[速查]</title>
    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/theme/css/styles.css" media="all" />
        <link rel="stylesheet" href="/theme/css/monokai.css" media="all" />
        <link rel="stylesheet" href="/theme/css/tab.min.css" media="all" />
        <link rel="stylesheet" href="/theme/css/jquery-ui.min.css" media="all" />

        <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
        <!--
        <link rel="stylesheet" href="http://apps.bdimg.com/libs/fontawesome/4.2.0/css/font-awesome.min.css">
        -->
        <!--[if IE 7]>
            <link rel="stylesheet" href="/theme/css/font-awesome-ie7.min.css">
        <![endif]-->

        <link href="/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
        <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />

</head>

<body>
    <div id="page" class="row">
        <div class="large-9 large-centered columns">

        <header id="header">
            <div class="constraint">
                <div class="o">
                    <a href="/"><h1 class="banner">Wklken <span class="blue"> Building </span></h1></a>

                <div class="social">
                            <a href="https://github.com/wklken" target='_blank'><i class="icon-github-sign icon-2x"></i></a>
                            <a href="http://weibo.com/wklken" target='_blank'><i class="icon-weibo icon-2x"></i></a>
                            <a href="mailto:wklken@yeah.net"><i class="icon-envelope icon-2x"></i></a>
                            <a href="http://www.wklken.me/feed.xml" target='_blank'><i class="icon-rss-sign icon-2x"></i></a>
                </div>
                <div class="nav">
                            <a href="/">首页</a>
                            <a href="/categories.html">分类</a>
                            <a href="/archives.html">归档</a>
                            <a href="/pages/projects.html">项目</a>
                            <a href="/pages/links.html">友链</a>
                            <a href="/pages/aboutme.html">关于</a>

                </div>

                </div>
            </div>
        </header><!-- /#banner -->

        <section id="main">


<article id="article">
    <section id="header">
        <!--
        <div class="meta">2013年07月04日</div>
        <h1 id="title"> Linux Shell脚本攻略笔记[速查] </h1>
        -->
        <div class="meta"> &nbsp; </div>
        <h1> Linux Shell脚本攻略笔记[速查] </h1>
    </section>

        <section id="toc">
            <div id="toc"><ul><li><a class="toc-href" href="#" title="Linux Shell脚本攻略笔记[速查]">Linux Shell脚本攻略笔记[速查]</a><ul><li><a class="toc-href" href="#zi-yuan" title="资源">资源</a></li><li><a class="toc-href" href="#shell-script" title="shell script">shell script</a></li><li><a class="toc-href" href="#run-shell-script" title="run shell script">run shell script</a></li><li><a class="toc-href" href="#echo" title="echo">echo</a></li><li><a class="toc-href" href="#printf" title="printf">printf</a></li><li><a class="toc-href" href="#huan-jing-bian-liang-he-bian-liang" title="环境变量和变量">环境变量和变量</a></li><li><a class="toc-href" href="#pgrep" title="pgrep">pgrep</a></li><li><a class="toc-href" href="#shellshu-xue-yun-suan" title="shell数学运算">shell数学运算</a></li><li><a class="toc-href" href="#ming-ling-zhuang-tai" title="命令状态">命令状态</a></li><li><a class="toc-href" href="#wen-jian-miao-shu-fu-he-zhong-ding-xiang" title="文件描述符和重定向">文件描述符和重定向</a></li><li><a class="toc-href" href="#cat" title="cat">cat</a></li><li><a class="toc-href" href="#shu-zu-he-guan-lian-shu-zu" title="数组和关联数组">数组和关联数组</a></li><li><a class="toc-href" href="#alias" title="alias">alias</a></li><li><a class="toc-href" href="#date" title="date">date</a></li><li><a class="toc-href" href="#diao-shi-jiao-ben" title="调试脚本">调试脚本</a></li><li><a class="toc-href" href="#han-shu-he-can-shu" title="函数和参数">函数和参数</a></li><li><a class="toc-href" href="#guan-dao" title="管道">管道</a></li><li><a class="toc-href" href="#du-qu-ming-ling-shu-chu" title="读取命令输出">读取命令输出</a></li><li><a class="toc-href" href="#read" title="read">read</a></li><li><a class="toc-href" href="#zi-duan-fen-ge-fu-he-die-dai-qi" title="字段分隔符和迭代器">字段分隔符和迭代器</a></li><li><a class="toc-href" href="#xun-huan" title="循环">循环</a></li><li><a class="toc-href" href="#bi-jiao-he-ce-shi" title="比较和测试">比较和测试</a></li><li><a class="toc-href" href="#find" title="find">find</a></li><li><a class="toc-href" href="#xargs" title="xargs">xargs</a></li><li><a class="toc-href" href="#tr" title="tr">tr</a></li><li><a class="toc-href" href="#md5sum" title="md5sum">md5sum</a></li><li><a class="toc-href" href="#sha1sum" title="sha1sum">sha1sum</a></li><li><a class="toc-href" href="#dui-mu-lu-jin-xing-xiao-yan" title="对目录进行校验">对目录进行校验</a></li><li><a class="toc-href" href="#sort" title="sort">sort</a></li><li><a class="toc-href" href="#uniq" title="uniq">uniq</a></li><li><a class="toc-href" href="#tempfile" title="tempfile">tempfile</a></li><li><a class="toc-href" href="#split" title="split">split</a></li><li><a class="toc-href" href="#bashbian-liang-pi-pei-qie-fen" title="bash变量匹配切分">bash变量匹配切分</a></li><li><a class="toc-href" href="#expect" title="expect">expect</a></li><li><a class="toc-href" href="#dd" title="dd">dd</a></li><li><a class="toc-href" href="#comm" title="comm">comm</a></li><li><a class="toc-href" href="#mkdir" title="mkdir">mkdir</a></li><li><a class="toc-href" href="#ls" title="ls">ls</a></li><li><a class="toc-href" href="#chmod" title="chmod">chmod</a></li><li><a class="toc-href" href="#chown" title="chown">chown</a></li><li><a class="toc-href" href="#chattr" title="chattr">chattr</a></li><li><a class="toc-href" href="#touch" title="touch">touch</a></li><li><a class="toc-href" href="#ln" title="ln">ln</a></li><li><a class="toc-href" href="#readlink" title="readlink">readlink</a></li><li><a class="toc-href" href="#file" title="file">file</a></li><li><a class="toc-href" href="#du-wen-jian" title="读文件">读文件</a></li><li><a class="toc-href" href="#diff" title="diff">diff</a></li><li><a class="toc-href" href="#head" title="head">head</a></li><li><a class="toc-href" href="#tail" title="tail">tail</a></li><li><a class="toc-href" href="#pushdpopd" title="pushd/popd">pushd/popd</a></li><li><a class="toc-href" href="#cd" title="cd">cd</a></li><li><a class="toc-href" href="#wc" title="wc">wc</a></li><li><a class="toc-href" href="#tree" title="tree">tree</a></li><li><a class="toc-href" href="#grep" title="grep">grep</a></li><li><a class="toc-href" href="#cut" title="cut">cut</a></li><li><a class="toc-href" href="#join" title="join">join</a></li><li><a class="toc-href" href="#sed" title="sed">sed</a></li><li><a class="toc-href" href="#awk" title="awk">awk</a></li><li><a class="toc-href" href="#wen-jian-die-dai" title="文件迭代">文件迭代</a></li><li><a class="toc-href" href="#paste" title="paste">paste</a></li><li><a class="toc-href" href="#tac" title="tac">tac</a></li><li><a class="toc-href" href="#rev" title="rev">rev</a></li><li><a class="toc-href" href="#wget" title="wget">wget</a></li><li><a class="toc-href" href="#curl" title="curl">curl</a></li><li><a class="toc-href" href="#lynx" title="lynx">lynx</a></li><li><a class="toc-href" href="#tar" title="tar">tar</a></li><li><a class="toc-href" href="#cpio" title="cpio">cpio</a></li><li><a class="toc-href" href="#gzip" title="gzip">gzip</a></li><li><a class="toc-href" href="#zcat" title="zcat">zcat</a></li><li><a class="toc-href" href="#bzip" title="bzip">bzip</a></li><li><a class="toc-href" href="#lzma" title="lzma">lzma</a></li><li><a class="toc-href" href="#zip" title="zip">zip</a></li><li><a class="toc-href" href="#base64" title="base64">base64</a></li><li><a class="toc-href" href="#md5sum_1" title="md5sum">md5sum</a></li><li><a class="toc-href" href="#rsync" title="rsync">rsync</a></li><li><a class="toc-href" href="#git" title="git">git</a></li><li><a class="toc-href" href="#dd_1" title="dd">dd</a></li><li><a class="toc-href" href="#mount" title="mount">mount</a></li><li><a class="toc-href" href="#wang-luo-xiang-guan_1" title="网络相关">网络相关</a><ul><li><a class="toc-href" href="#ifconfig" title="ifconfig">ifconfig</a></li><li><a class="toc-href" href="#ping" title="ping">ping</a></li><li><a class="toc-href" href="#fping" title="fping">fping</a></li><li><a class="toc-href" href="#lftp" title="lftp">lftp</a></li><li><a class="toc-href" href="#scp" title="scp">scp</a></li><li><a class="toc-href" href="#ssh" title="SSH">SSH</a></li><li><a class="toc-href" href="#lsof" title="lsof">lsof</a></li><li><a class="toc-href" href="#netstat" title="netstat">netstat</a></li></ul></li><li><a class="toc-href" href="#ci-pan-he-xi-tong_1" title="磁盘和系统">磁盘和系统</a><ul><li><a class="toc-href" href="#du" title="du">du</a></li><li><a class="toc-href" href="#df" title="df">df</a></li><li><a class="toc-href" href="#time" title="time">time</a></li><li><a class="toc-href" href="#who" title="who">who</a></li><li><a class="toc-href" href="#uptime" title="uptime">uptime</a></li><li><a class="toc-href" href="#last" title="last">last</a></li><li><a class="toc-href" href="#watch" title="watch">watch</a></li></ul></li><li><a class="toc-href" href="#jin-cheng-he-xian-cheng_1" title="进程和线程">进程和线程</a><ul><li><a class="toc-href" href="#ps" title="ps">ps</a></li><li><a class="toc-href" href="#pgrep_1" title="pgrep">pgrep</a></li><li><a class="toc-href" href="#top" title="top">top</a></li><li><a class="toc-href" href="#kill" title="kill">kill</a></li><li><a class="toc-href" href="#pkill" title="pkill">pkill</a></li><li><a class="toc-href" href="#which" title="which">which</a></li><li><a class="toc-href" href="#whereis" title="whereis">whereis</a></li><li><a class="toc-href" href="#file_1" title="file">file</a></li><li><a class="toc-href" href="#whatis" title="whatis">whatis</a></li><li><a class="toc-href" href="#hostname" title="hostname">hostname</a></li><li><a class="toc-href" href="#uname" title="uname">uname</a></li><li><a class="toc-href" href="#crontab" title="crontab">crontab</a></li><li><a class="toc-href" href="#getopts" title="getopts">getopts</a></li><li><a class="toc-href" href="#history" title="history">history</a></li><li><a class="toc-href" href="#sudo" title="sudo">sudo</a></li><li><a class="toc-href" href="#cal" title="cal">cal</a></li><li><a class="toc-href" href="#cp" title="cp">cp</a></li><li><a class="toc-href" href="#mv" title="mv">mv</a></li><li><a class="toc-href" href="#pwd" title="pwd">pwd</a></li><li><a class="toc-href" href="#free" title="free">free</a></li><li><a class="toc-href" href="#eval" title="eval">eval</a></li><li><a class="toc-href" href="#basename" title="basename">basename</a></li><li><a class="toc-href" href="#cmp" title="cmp">cmp</a></li><li><a class="toc-href" href="#rm" title="rm">rm</a></li><li><a class="toc-href" href="#service" title="service">service</a></li><li><a class="toc-href" href="#man" title="man">man</a></li><li><a class="toc-href" href="#passwd" title="passwd">passwd</a></li><li><a class="toc-href" href="#gcc" title="gcc">gcc</a></li><li><a class="toc-href" href="#g" title="g++">g++</a></li><li><a class="toc-href" href="#java" title="java">java</a></li><li><a class="toc-href" href="#guan-yu-devnull" title="关于/dev/null">关于/dev/null</a></li><li><a class="toc-href" href="#yu-yan-ji-luan-ma" title="语言及乱码">语言及乱码</a></li><li><a class="toc-href" href="#shellde-ban-ben" title="shell的版本">shell的版本</a></li></ul></li></ul></li></ul></div>
        </section>
    <section id="content">
        <p>Linux Shell脚本攻略的笔记，markdown编写，可以速查(ctrl+f)</p>
<p>2013-09-08 从历史网摘中补充
 2014-02-16 增加&lt;<shell脚本指南>&gt;笔记补充</shell脚本指南></p>
<hr/>
<h3 id="zi-yuan">资源</h3>
<p><a href="http://coolshell.cn/articles/9104.html">sed简明教程</a></p>
<p><a href="http://coolshell.cn/articles/9070.html">awk简明教程</a></p>
<hr/>
<h3 id="shell-script">shell script</h3>
<div class="monokai"><pre><span class="code-line"><span></span><span class="ch">#!/bin/bash</span></span>
<span class="code-line"><span class="c1"># do something</span></span>
</pre></div>
<h3 id="run-shell-script">run shell script</h3>
<div class="monokai"><pre><span class="code-line"><span></span>sh script.sh</span>
<span class="code-line"></span>
<span class="code-line">or</span>
<span class="code-line"></span>
<span class="code-line">chmod a+x script.sh</span>
<span class="code-line">./script.sh</span>
<span class="code-line"># 会读取首行的解释器, 执行</span>
</pre></div>
<p>cmd</p>
<div class="monokai"><pre><span class="code-line"><span></span>cmd1; cmd2</span>
<span class="code-line"></span>
<span class="code-line">or</span>
<span class="code-line"></span>
<span class="code-line">cmd1</span>
<span class="code-line">cmd2</span>
</pre></div>
<h3 id="echo">echo</h3>
<p>echo  的功能正如其名，就是基于标准输出打印一段文本</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "welcome to bash"</span>
<span class="code-line">echo welcome to bash</span>
</pre></div>
<p>使用不带引号的echo时，无法显示分号</p>
<p>使用单引号echo时，bash不会对单引号中变量求值  '$var'</p>
<p>echo 中转义换行符</p>
<p>默认情况，echo将换行标志追加到文本尾部，可以忽略结尾换行符</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo -n 'test\n'</span>
</pre></div>
<p>对字符串进行转义</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo -e '1\t2\t3'</span>
</pre></div>
<p>打印彩色输出</p>
<div class="monokai"><pre><span class="code-line"><span></span>文字颜色码</span>
<span class="code-line">    重置0</span>
<span class="code-line">    黑色30</span>
<span class="code-line">    红色31</span>
<span class="code-line">    绿色32</span>
<span class="code-line">    黄色33</span>
<span class="code-line">    蓝色34</span>
<span class="code-line">    洋红35</span>
<span class="code-line">    青色36</span>
<span class="code-line">    白色37</span>
<span class="code-line"></span>
<span class="code-line">echo -e "\e[1;31m This is red test \e[0m"</span>
<span class="code-line"></span>
<span class="code-line">背景颜色码</span>
<span class="code-line">    重置0</span>
<span class="code-line">    黑色40</span>
<span class="code-line">    红色41</span>
<span class="code-line">    绿色42</span>
<span class="code-line">    黄色43</span>
<span class="code-line">    蓝色44</span>
<span class="code-line">    洋红45</span>
<span class="code-line">    青色46</span>
<span class="code-line">    白色47</span>
<span class="code-line"></span>
<span class="code-line">echo -e "\e[1;42m Green Background \e[0m"</span>
</pre></div>
<h3 id="printf">printf</h3>
<p>可以格式化字符串, 使用参数同c中printf一样</p>
<div class="monokai"><pre><span class="code-line"><span></span>printf "hello world"</span>
</pre></div>
<p>默认不会加换行符, 需要手动添加</p>
<div class="monokai"><pre><span class="code-line"><span></span>printf "%-5s %-10s %-4.2f\n" 3 Jeff 77.564</span>
<span class="code-line"></span>
<span class="code-line">3    Jeff      77.56</span>
</pre></div>
<h3 id="huan-jing-bian-liang-he-bian-liang">环境变量和变量</h3>
<p>bash中，每个变量的值都是字符串，无论你给变量赋值时是否使用引号，值都会以字符串的形式存储</p>
<p>环境变量</p>
<p>查看所有与此终端进程相关的环境变量</p>
<div class="monokai"><pre><span class="code-line"><span></span>env</span>
</pre></div>
<p>查看某个进程的环境变量</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">cat /proc/</span><span class="p">$</span><span class="nv">PID</span><span class="x">/environ</span></span>
</pre></div>
<p>变量赋值</p>
<div class="monokai"><pre><span class="code-line"><span></span>var=value</span>
<span class="code-line">var='the value'</span>
<span class="code-line">var="the <span class="nv">$PARAM</span>"</span>
<span class="code-line"></span>
<span class="code-line">echo <span class="nv">$var</span></span>
<span class="code-line">echo <span class="cp">${</span><span class="n">var</span><span class="cp">}</span></span>
<span class="code-line"></span>
<span class="code-line">var = value非变量赋值是相等操作</span>
</pre></div>
<p>环境变量</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">未在当前进程中定义，而是从父进程中继承而来的变量</span></span>
<span class="code-line"><span class="x">export 设置环境变量,之后,从当前shell 执行的任何程序都会继承这个变量</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">export PYTHONPATH=</span><span class="p">$</span><span class="nv">PYTHONPATH</span><span class="x">:/home/ken/workspace</span></span>
</pre></div>
<p>常用的环境变量</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">PATH 查找可执行文件路径, 通常定义在/etc/environment or /ect/profile or ~/.bashrc</span></span>
<span class="code-line"><span class="x">修改:        export PATH=</span><span class="p">$</span><span class="nv">PATH</span><span class="x">:/new/path/</span></span>
<span class="code-line"><span class="x">HOME</span></span>
<span class="code-line"><span class="x">PWD</span></span>
<span class="code-line"><span class="x">USER</span></span>
<span class="code-line"><span class="x">UID</span></span>
<span class="code-line"><span class="x">SHELL</span></span>
</pre></div>
<p>获取字符串长度</p>
<div class="monokai"><pre><span class="code-line"><span></span>length=<span class="cp">${</span><span class="c1">#var</span><span class="cp">}</span></span>
</pre></div>
<p>识别当前shell版本</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">echo </span><span class="p">$</span><span class="nv">SHELL</span><span class="x"></span></span>
<span class="code-line"><span class="x">    /bin/bash</span></span>
<span class="code-line"><span class="x">echo </span><span class="p">$</span><span class="x">0</span></span>
<span class="code-line"><span class="x">    bash</span></span>
</pre></div>
<p>检查是否为超级用户 or 普通用户</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">root的UID=0</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">if [ </span><span class="p">$</span><span class="nv">UID</span><span class="x"> -ne 0 ]</span></span>
<span class="code-line"><span class="x">then</span></span>
<span class="code-line"><span class="x">    echo "not root user"</span></span>
<span class="code-line"><span class="x">else</span></span>
<span class="code-line"><span class="x">    echo "root"</span></span>
<span class="code-line"><span class="x">fi</span></span>
</pre></div>
<p>修改bash的提示字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>设置PS1变量</span>
<span class="code-line">\u用户名</span>
<span class="code-line">\h主机名</span>
<span class="code-line">\w当前工作目录</span>
</pre></div>
<h3 id="pgrep">pgrep</h3>
<p>获取某个进程名对应进程id</p>
<div class="monokai"><pre><span class="code-line"><span></span>pgrep gedit</span>
</pre></div>
<h3 id="shellshu-xue-yun-suan">shell数学运算</h3>
<p>整数运算</p>
<p>let</p>
<div class="monokai"><pre><span class="code-line"><span></span>no1=4</span>
<span class="code-line">no2=5</span>
<span class="code-line">let result=no1+no2</span>
<span class="code-line"></span>
<span class="code-line">let no1++</span>
<span class="code-line">let no2--</span>
<span class="code-line">let no1+=7</span>
<span class="code-line">let no2-=7</span>
</pre></div>
<p>expr(少用)</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">result=`expr 3 + 4`</span></span>
<span class="code-line"><span class="x">result=</span><span class="p">$(</span><span class="err">expr</span> <span class="p">$</span><span class="nv">no1</span> <span class="err">+</span> <span class="m">5</span><span class="p">)</span><span class="x"></span></span>
</pre></div>
<p>其他方法</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">result=</span><span class="p">$</span><span class="x">[ no1 + no2 ]</span></span>
<span class="code-line"><span class="x">result=</span><span class="p">$</span><span class="x">[ </span><span class="p">$</span><span class="nv">no</span><span class="x"> + 5 ]</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">result=</span><span class="p">$((</span> <span class="err">no1</span> <span class="err">+</span> <span class="m">5</span> <span class="p">))</span><span class="x"></span></span>
</pre></div>
<p>浮点数</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "4 * 0.56" | bc</span>
<span class="code-line">设定精度</span>
<span class="code-line">echo "scale=2;3/8" | bc</span>
<span class="code-line">进制转换</span>
<span class="code-line">echo "obase=2;100" | bc</span>
<span class="code-line">平方</span>
<span class="code-line">echo "10^10" | bc</span>
<span class="code-line">平方根</span>
<span class="code-line">echo "sqrt(100)" | bc</span>
</pre></div>
<h3 id="ming-ling-zhuang-tai">命令状态</h3>
<p>当命令成功完成, 返回0</p>
<p>发生错误并退回, 返回非0</p>
<p>可以从$?中获取  cmd; echo $?</p>
<h3 id="wen-jian-miao-shu-fu-he-zhong-ding-xiang">文件描述符和重定向</h3>
<p>文件描述符: 与文件输入/输出相关联的整数, 用来跟踪已打开的文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>0 stdin  标砖输入</span>
<span class="code-line">1 stdout 标准输出</span>
<span class="code-line">2 stderr 标准错误</span>
</pre></div>
<p>重定向到文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>清空文件写入新内容</span>
<span class="code-line">echo "test" &gt; temp.txt</span>
<span class="code-line">追加</span>
<span class="code-line">echo "test" &gt;&gt; temp.txt</span>
<span class="code-line"></span>
<span class="code-line">&gt;等价于1&gt;</span>
<span class="code-line">&gt;&gt;等价于 1&gt;&gt;</span>
</pre></div>
<p>输出分离或合并</p>
<div class="monokai"><pre><span class="code-line"><span></span>分离</span>
<span class="code-line">cmd 2&gt;stderr.txt  1&gt;stdout.txt</span>
<span class="code-line"></span>
<span class="code-line">合并</span>
<span class="code-line">cmd &gt; output.txt 2&gt;&amp;1</span>
<span class="code-line">or</span>
<span class="code-line">cmd &amp;&gt; output.txt</span>
</pre></div>
<p>扔到垃圾桶</p>
<div class="monokai"><pre><span class="code-line"><span></span>/dev/null 特殊设备文件, 接收到的任何数据都会被丢弃(位桶/黑洞)</span>
<span class="code-line"></span>
<span class="code-line">只有标准错误</span>
<span class="code-line">cmd 2 &gt; /dev/null</span>
<span class="code-line"></span>
<span class="code-line">标准输出和标准错误</span>
<span class="code-line">cmd &gt;/dev/null 2&gt;&amp;1</span>
</pre></div>
<p>同时输出到终端和文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>cmd | tee file1</span>
<span class="code-line"></span>
<span class="code-line">tee默认覆盖，可以-a选项追加</span>
<span class="code-line">cmd | tee -a file1</span>
</pre></div>
<p>将stdin作为命令参数</p>
<div class="monokai"><pre><span class="code-line"><span></span>cmd1 | cmd2 | cmd3 -</span>
</pre></div>
<p>将文件重定向到命令</p>
<div class="monokai"><pre><span class="code-line"><span></span>cmd &lt; file</span>
</pre></div>
<p>自定义文件描述符</p>
<div class="monokai"><pre><span class="code-line"><span></span>使用文件描述符3打开并读取文件</span>
<span class="code-line">exec 3&lt;input.txt</span>
<span class="code-line">cat &lt;&amp;3</span>
<span class="code-line"></span>
<span class="code-line">使用文件描述符4进行写入</span>
<span class="code-line">exec 4&gt;output.txt</span>
<span class="code-line">echo newline &gt;&amp;4</span>
</pre></div>
<h3 id="cat">cat</h3>
<p>cat, concatenate(拼接)</p>
<p>“cat”代表了连结（Concatenation），连接两个或者更多文本文件或者以标准输出形式打印文件的内容</p>
<p>一般格式</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat file1 file2 file3</span>
<span class="code-line"></span>
<span class="code-line">从管道中读取</span>
<span class="code-line">OUTPUT_FROM_SOME_CMDS | cat</span>
<span class="code-line"></span>
<span class="code-line">echo "test" | cat - file1</span>
</pre></div>
<p>压缩空白行, 多个连续空行变成单个</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat -s  file</span>
</pre></div>
<p>配合tr移除空白行</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat file | tr -s '\n' #连续多个\n -&gt; \n</span>
</pre></div>
<p>加行号</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat -n file</span>
</pre></div>
<p>显示制表符等</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat -T file</span>
<span class="code-line"></span>
<span class="code-line">cat f &gt; t</span>
<span class="code-line">注意：“&gt;&gt;”和“&gt;”调用了追加符号。它们用来追加到文件里，而不是显示在标准输出上。</span>
<span class="code-line">“&gt;”符号会删除已存在的文件，然后创建一个新的文件。</span>
<span class="code-line">所以因为安全的原因，建议使用“&gt;&gt;”，它会写入到文件中，而不是覆盖或者删除。</span>
</pre></div>
<p>输入多行文字(CTRL + d 退出)</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat &gt; test.txt</span>
</pre></div>
<h3 id="shu-zu-he-guan-lian-shu-zu">数组和关联数组</h3>
<p>普通数组，整数作为数组索引, 借助索引将多个独立的数据存储为一个集合(list)</p>
<p>关联数组，可以使用字符串作为索引(map)</p>
<p>数组</p>
<p>定义</p>
<div class="monokai"><pre><span class="code-line"><span></span>array_var=(1 2 3 4 5)</span>
<span class="code-line"></span>
<span class="code-line">or</span>
<span class="code-line">array_var[0]="test1"</span>
<span class="code-line">array_var[3]="test3"</span>
</pre></div>
<p>读取</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo <span class="cp">${</span><span class="n">array_var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="cp">}</span></span>
</pre></div>
<p>以清单形式打印</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo <span class="cp">${</span><span class="n">array_var</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="cp">}</span></span>
<span class="code-line">echo <span class="cp">${</span><span class="n">array_var</span><span class="p">[</span><span class="err">@</span><span class="p">]</span><span class="cp">}</span></span>
</pre></div>
<p>长度</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo <span class="cp">${</span><span class="c1">#array_var[*]</span><span class="cp">}</span></span>
</pre></div>
<p>获取索引列表</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo <span class="cp">${</span><span class="err">!</span><span class="n">array_var</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="cp">}</span></span>
</pre></div>
<p>关联数组</p>
<div class="monokai"><pre><span class="code-line"><span></span>declare -A ass_array</span>
<span class="code-line"></span>
<span class="code-line">内嵌索引-值</span>
<span class="code-line">ass_array=([index1]=value1 [index2]=value2)</span>
<span class="code-line"></span>
<span class="code-line">独立</span>
<span class="code-line">ass_array[index3]=value3</span>
<span class="code-line"></span>
<span class="code-line">echo <span class="cp">${</span><span class="n">ass_array</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span><span class="cp">}</span></span>
</pre></div>
<h3 id="alias">alias</h3>
<p>alias是一个系统自建的shell命令，允许你为名字比较长的或者经常使用的命令指定别名。</p>
<div class="monokai"><pre><span class="code-line"><span></span>alias new_command='command seq'</span>
<span class="code-line">unalias new_command</span>
<span class="code-line"></span>
<span class="code-line">使用原生命令</span>
<span class="code-line">\new_command</span>
</pre></div>
<h3 id="date">date</h3>
<p>“date”命令使用标准的输出打印当前的日期和时间，也可以深入设置</p>
<p>读取日期</p>
<div class="monokai"><pre><span class="code-line"><span></span>date</span>
</pre></div>
<p>时间戳</p>
<div class="monokai"><pre><span class="code-line"><span></span>date +%s</span>
</pre></div>
<p>日期转换为时间戳</p>
<div class="monokai"><pre><span class="code-line"><span></span>date --date "Thu Nov 18 08:07:21 IST 2010" +%s</span>
</pre></div>
<p>日期格式化</p>
<div class="monokai"><pre><span class="code-line"><span></span>星期  %a  Sat</span>
<span class="code-line">      %A  Saturday</span>
<span class="code-line">月    %b  Nov</span>
<span class="code-line">      %B  November</span>
<span class="code-line">日    %d  31</span>
<span class="code-line">固定日期格式mm/dd/yy     %D</span>
<span class="code-line">年    %y  10</span>
<span class="code-line">      %Y  2010</span>
<span class="code-line">小时  %I/%H    08</span>
<span class="code-line">分钟  %M  33</span>
<span class="code-line">秒    %S  10</span>
<span class="code-line">纳秒  %N  696308515</span>
<span class="code-line">Unix纪元时  %s</span>
</pre></div>
<p>格式化</p>
<div class="monokai"><pre><span class="code-line"><span></span>date "+%Y %B %d"</span>
<span class="code-line"></span>
<span class="code-line">date +%Y-%m-%d</span>
<span class="code-line">输出： 2011-07-28</span>
<span class="code-line">date +"%Y-%m-%d %H:%M:%S"</span>
</pre></div>
<p>设置日期和时间</p>
<div class="monokai"><pre><span class="code-line"><span></span>date -s "格式化日期字符串"</span>
<span class="code-line"></span>
<span class="code-line">date -s "21 June 2009 11:01:22"</span>
</pre></div>
<p>延时</p>
<div class="monokai"><pre><span class="code-line"><span></span>sleep number_of_seconds</span>
</pre></div>
<p>两天后及两天前</p>
<div class="monokai"><pre><span class="code-line"><span></span>date -d '2 days' +%Y%m%d</span>
<span class="code-line">date -d '2 days ago' +%Y%m%d</span>
</pre></div>
<p>某一天的几天前</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">TODAY=`date +%Y%m%d`</span></span>
<span class="code-line"><span class="x">DAY_1_AGO=`date -d "</span><span class="p">$</span><span class="nv">TODAY</span><span class="x"> 1 days ago" +%Y%m%d`</span></span>
</pre></div>
<p>时间戳日期转换</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="n">date</span> <span class="o">-</span><span class="n">d</span> <span class="mi">@1193144433</span></span>
<span class="code-line"><span class="n">date</span> <span class="o">-</span><span class="n">d</span> <span class="mi">@1193144433</span> <span class="s">"+%Y-%m-%d %T"</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="err">反向</span><span class="o">:</span></span>
<span class="code-line"><span class="n">date</span> <span class="o">-</span><span class="n">d</span> <span class="s">"2007-10-23 15:00:23"</span> <span class="s">"+%s"</span></span>
</pre></div>
<p>赋值给变量</p>
<div class="monokai"><pre><span class="code-line"><span></span>DATE=$(date +%Y%m%d)</span>
<span class="code-line">DATE=`date +%Y%m%d`</span>
</pre></div>
<h3 id="diao-shi-jiao-ben">调试脚本</h3>
<p>打印出所执行的每一行命令</p>
<div class="monokai"><pre><span class="code-line"><span></span>bash -x script.sh</span>
<span class="code-line">sh -x script.sh</span>
</pre></div>
<p>在脚本中设置开关</p>
<div class="monokai"><pre><span class="code-line"><span></span>set -x 在执行时显示参数和命令</span>
<span class="code-line">set +x 关闭调试</span>
<span class="code-line">set -v 当命令进行读取时显示输入</span>
<span class="code-line">set +v 禁止打印输入</span>
</pre></div>
<p>直接修改脚本</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="ch">#!/bin/bash -xv</span></span>
</pre></div>
<h3 id="han-shu-he-can-shu">函数和参数</h3>
<p>定义函数</p>
<div class="monokai"><pre><span class="code-line"><span></span>function fname()</span>
<span class="code-line">{</span>
<span class="code-line">    statements;</span>
<span class="code-line">}</span>
<span class="code-line">or</span>
<span class="code-line">fname()</span>
<span class="code-line">{</span>
<span class="code-line">    statements;</span>
<span class="code-line">}</span>
</pre></div>
<p>调用</p>
<div class="monokai"><pre><span class="code-line"><span></span>fname;</span>
<span class="code-line">传参</span>
<span class="code-line">fname arg1 arg2;</span>
</pre></div>
<p>接收参数</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="err">$</span><span class="mi">1</span><span class="err">第一个参数</span></span>
<span class="code-line"><span class="err">$</span><span class="mi">2</span><span class="err">第二个参数</span></span>
<span class="code-line"><span class="err">$</span><span class="n">n</span><span class="err">第</span><span class="n">n</span><span class="err">个参数</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="s">"$@"</span><span class="err">被扩展成</span> <span class="s">"$1"</span> <span class="s">"$2"</span> <span class="s">"$3"</span></span>
<span class="code-line"><span class="s">"$*"</span><span class="err">扩展成</span><span class="s">"$1c$2c$3"</span><span class="p">,</span> <span class="err">其中</span><span class="n">c</span><span class="err">是</span><span class="n">IFS</span><span class="err">第一个字符</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="s">"$@"</span><span class="err">使用最多</span><span class="p">,</span> <span class="err">$</span><span class="o">*</span><span class="err">将所有的参数当做单个字符串</span></span>
</pre></div>
<p>bash支持递归</p>
<p>导出函数,可以作用到子进程中</p>
<div class="monokai"><pre><span class="code-line"><span></span>export -f fname</span>
</pre></div>
<p>函数及命令返回值</p>
<div class="monokai"><pre><span class="code-line"><span></span>cmd;</span>
<span class="code-line">echo $?</span>
<span class="code-line"></span>
<span class="code-line">退出状态，成功退出，状态为0，否则，非0</span>
<span class="code-line"></span>
<span class="code-line">cmd</span>
<span class="code-line">if [ $? -eq 0 ]</span>
<span class="code-line">then</span>
<span class="code-line">    echo "success"</span>
<span class="code-line">else</span>
<span class="code-line">    echo "fail"</span>
<span class="code-line">fi</span>
</pre></div>
<h3 id="guan-dao">管道</h3>
<p>前一个命令的输出作为后一个命令的输入</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="p">$</span><span class="nv">cmd1</span><span class="x"> | cmd2 | cmd3</span></span>
</pre></div>
<h3 id="du-qu-ming-ling-shu-chu">读取命令输出</h3>
<div class="monokai"><pre><span class="code-line"><span></span><span class="err">子shell</span>  <span class="err">subshell</span></span>
<span class="code-line"><span class="nv">cmd_output</span><span class="o">=</span><span class="k">$(</span>COMMANDS<span class="k">)</span></span>
<span class="code-line"><span class="err">or</span></span>
<span class="code-line"><span class="err">反引用</span></span>
<span class="code-line"><span class="nv">cmd_output</span><span class="o">=</span><span class="sb">`</span>COMMANDS<span class="sb">`</span></span>
</pre></div>
<p>子shell本身是独立进程, 不会对当前shell有任何影响</p>
<div class="monokai"><pre><span class="code-line"><span></span>pwd;</span>
<span class="code-line">(cd /bin; ls)</span>
<span class="code-line">pwd #同上一个pwd</span>
</pre></div>
<p>保留空格和换行符</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">out=</span><span class="p">$(</span><span class="err">cat</span> <span class="err">text.txt</span><span class="p">)</span><span class="x"></span></span>
<span class="code-line"><span class="x">echo </span><span class="p">$</span><span class="nv">out</span><span class="x">  </span><span class="err">#</span><span class="x">丢失所有换行符</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">out="</span><span class="p">$(</span><span class="err">cat</span> <span class="err">text.txt</span><span class="p">)</span><span class="x">"</span></span>
<span class="code-line"><span class="x">echo </span><span class="p">$</span><span class="nv">out</span><span class="x">  </span><span class="err">#</span><span class="x">保留</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">cat a</span></span>
<span class="code-line"><span class="x">1</span></span>
<span class="code-line"><span class="x">2</span></span>
<span class="code-line"><span class="x">3</span></span>
<span class="code-line"><span class="x">echo </span><span class="p">$(</span><span class="err">cat</span> <span class="err">a</span><span class="p">)</span><span class="x"></span></span>
<span class="code-line"><span class="x">1 2 3</span></span>
<span class="code-line"><span class="x">echo "</span><span class="p">$(</span><span class="err">cat</span> <span class="err">a</span><span class="p">)</span><span class="x">"</span></span>
<span class="code-line"><span class="x">1</span></span>
<span class="code-line"><span class="x">2</span></span>
<span class="code-line"><span class="x">3</span></span>
</pre></div>
<h3 id="read">read</h3>
<p>read, 用于从键盘或标准输入中读取文本</p>
<p>读取n个字符存入变量</p>
<div class="monokai"><pre><span class="code-line"><span></span>read -n number_of_chars variable_name</span>
</pre></div>
<p>不回显的方式读取密码</p>
<div class="monokai"><pre><span class="code-line"><span></span>read -s var</span>
</pre></div>
<p>显示提示信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>read -p "Enter input:" var</span>
</pre></div>
<p>限时输入</p>
<div class="monokai"><pre><span class="code-line"><span></span>read -t  timeout var</span>
</pre></div>
<p>设置界定符</p>
<div class="monokai"><pre><span class="code-line"><span></span>read -d delim_char var</span>
<span class="code-line">read -d ":" var</span>
<span class="code-line">hello:</span>
</pre></div>
<h3 id="zi-duan-fen-ge-fu-he-die-dai-qi">字段分隔符和迭代器</h3>
<p>内部字段分隔符，Internal Field Separator, IFS</p>
<p>IFS默认为空白字符（换行符，制表符，空格）</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">data="name,sex,rollno"</span></span>
<span class="code-line"><span class="x">oldIFS=</span><span class="p">$</span><span class="nv">IFS</span><span class="x"></span></span>
<span class="code-line"><span class="x">IFS=,</span></span>
<span class="code-line"><span class="x">for item in </span><span class="p">$</span><span class="nv">data</span><span class="x"></span></span>
<span class="code-line"><span class="x">do</span></span>
<span class="code-line"><span class="x">        echo </span><span class="p">$</span><span class="nv">item</span><span class="x"></span></span>
<span class="code-line"><span class="x">done</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">IFS=</span><span class="p">$</span><span class="nv">oldIFS</span><span class="x"></span></span>
</pre></div>
<h3 id="xun-huan">循环</h3>
<p>for循环</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo {1..50}</span>
<span class="code-line"></span>
<span class="code-line">for i in {a..z}; do actions; done;</span>
<span class="code-line"></span>
<span class="code-line">or</span>
<span class="code-line"></span>
<span class="code-line">for((i=0;i&lt;10;i++))</span>
<span class="code-line">{</span>
<span class="code-line">    commands;</span>
<span class="code-line">}</span>
</pre></div>
<p>while循环</p>
<div class="monokai"><pre><span class="code-line"><span></span>while condition</span>
<span class="code-line">do</span>
<span class="code-line">    commands;</span>
<span class="code-line">done</span>
</pre></div>
<p>until循环</p>
<div class="monokai"><pre><span class="code-line"><span></span>until condition</span>
<span class="code-line">do</span>
<span class="code-line">    commands;</span>
<span class="code-line">done</span>
</pre></div>
<h3 id="bi-jiao-he-ce-shi">比较和测试</h3>
<p>if条件</p>
<div class="monokai"><pre><span class="code-line"><span></span>if condition;</span>
<span class="code-line">then</span>
<span class="code-line">    commands;</span>
<span class="code-line">elif condition;</span>
<span class="code-line">then</span>
<span class="code-line">    commands;</span>
<span class="code-line">else</span>
<span class="code-line">    commands;</span>
<span class="code-line">fi</span>
</pre></div>
<p>逻辑运算符进行简化, 短路运算更简洁</p>
<div class="monokai"><pre><span class="code-line"><span></span>[ condition ] &amp;&amp; action;</span>
<span class="code-line">[ condition ] || action;</span>
</pre></div>
<p>算术比较</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">-gt 大于</span></span>
<span class="code-line"><span class="x">-lt 小于</span></span>
<span class="code-line"><span class="x">-ge 大于等于</span></span>
<span class="code-line"><span class="x">-le 小于等于</span></span>
<span class="code-line"><span class="x">-ne 不等于</span></span>
<span class="code-line"><span class="x">-eq 等于</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">注意[]和操作数之间的空格</span></span>
<span class="code-line"><span class="x">[ </span><span class="p">$</span><span class="nv">var</span><span class="x"> -eq 0 ]</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">and</span></span>
<span class="code-line"><span class="x">[ </span><span class="p">$</span><span class="nv">var</span><span class="x"> -ne 0 -a </span><span class="p">$</span><span class="nv">var2</span><span class="x"> -ge 2 ]</span></span>
<span class="code-line"><span class="x">or</span></span>
<span class="code-line"><span class="x">[ </span><span class="p">$</span><span class="nv">var</span><span class="x"> -ne 0 -o </span><span class="p">$</span><span class="nv">var2</span><span class="x"> -ge 2 ]</span></span>
</pre></div>
<p>文件测试</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">[ -f </span><span class="p">$</span><span class="nv">file_var</span><span class="x"> ] 正常文件路径或文件名</span></span>
<span class="code-line"><span class="x">[ -x </span><span class="p">$</span><span class="nv">var</span><span class="x"> ] 可执行</span></span>
<span class="code-line"><span class="x">-d 目录</span></span>
<span class="code-line"><span class="x">-e 存在</span></span>
<span class="code-line"><span class="x">-c 字符设备文件</span></span>
<span class="code-line"><span class="x">-b 块设备文件</span></span>
<span class="code-line"><span class="x">-w 可写</span></span>
<span class="code-line"><span class="x">-r 可读</span></span>
<span class="code-line"><span class="x">-L 符号链接</span></span>
</pre></div>
<p>字符串比较</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="k">[[ $str1 = $str2 ]]</span></span>
<span class="code-line"><span class="k">[[ $str1 == $str2 ]]</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="na">[[ $str1 !</span><span class="o">=</span> <span class="s">$str2 ]] 不等</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="k">[[ $str1 &gt; $str2 ]]</span></span>
<span class="code-line"><span class="k">[[ $str1 &lt; $str2 ]]</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="err">[[</span> <span class="err">-z</span> <span class="err">$str1</span> <span class="err">]]</span>  <span class="err">空</span></span>
<span class="code-line"><span class="err">[[</span> <span class="err">-n</span> <span class="err">$str1</span> <span class="err">]]</span>  <span class="err">非空</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="err">if</span> <span class="k">[[ -n $str1 ]] &amp;&amp; [[ -z $str2 ]]</span></span>
<span class="code-line"><span class="err">then</span></span>
<span class="code-line">    <span class="err">commands</span><span class="c1">;</span></span>
<span class="code-line"><span class="err">fi</span></span>
</pre></div>
<h3 id="find">find</h3>
<p>搜索指定目录下的文件，从开始于父目录，然后搜索子目录</p>
<p>基本</p>
<div class="monokai"><pre><span class="code-line"><span></span>find base_path</span>
<span class="code-line"></span>
<span class="code-line"># 打印文件和目录列表</span>
<span class="code-line">find . -print  #默认\n分割文件名</span>
</pre></div>
<p>文件名</p>
<div class="monokai"><pre><span class="code-line"><span></span>find path -name "*.txt" -print</span>
<span class="code-line">          -iname  忽略大小写</span>
<span class="code-line"></span>
<span class="code-line">多个条件 or</span>
<span class="code-line">find . \( -name "*.txt" -o -name "*.py" \)</span>
</pre></div>
<p>文件路径</p>
<div class="monokai"><pre><span class="code-line"><span></span>通配符</span>
<span class="code-line">find /home/users -path "*slynux*" -print</span>
<span class="code-line"></span>
<span class="code-line">正则</span>
<span class="code-line">find . -regex ".*\(\.py\|\.sh\)$"</span>
<span class="code-line">       -iregex 忽略大小写</span>
</pre></div>
<p>否定参数</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . ! -name "*.txt" -print</span>
</pre></div>
<p>根据文件类型</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -type d -print</span>
<span class="code-line">f 普通文件</span>
<span class="code-line">l 符号链接</span>
<span class="code-line">d 目录</span>
<span class="code-line">c 字符设备</span>
<span class="code-line">b 块设备</span>
<span class="code-line">s 套接字</span>
<span class="code-line">p Fifo</span>
</pre></div>
<p>设定目录深度</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -maxdepth 1 -type f -print</span>
<span class="code-line">find . -mindepth 2 -type f -print</span>
</pre></div>
<p>根据文件时间搜索</p>
<div class="monokai"><pre><span class="code-line"><span></span>计量单位 天</span>
<span class="code-line">-atime 最近一次访问时间</span>
<span class="code-line">-mtime 最后一次被修改时间</span>
<span class="code-line">-ctime 文件元数据，最近一次修改时间</span>
<span class="code-line"></span>
<span class="code-line">find . -type f -atime -7 -print #最近七天内被访问的</span>
<span class="code-line">find . -type f -atime 7 -print  #恰好在七天前</span>
<span class="code-line">                      +7 -print #超过七天</span>
<span class="code-line"></span>
<span class="code-line">计量单位 分钟</span>
<span class="code-line">-amin 访问时间</span>
<span class="code-line">-mmin 修改时间</span>
<span class="code-line">-cmin 变化时间</span>
<span class="code-line"></span>
<span class="code-line">find . -type f -amin +7 -print #访问时间超过7分钟的</span>
<span class="code-line"></span>
<span class="code-line">find . -type f -newer file.txt -print  #用于比较时间戳的参考文件，比参考文件更新的文件</span>
</pre></div>
<p>基于文件大小的搜索</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -type f -size +2k</span>
<span class="code-line">+ 大于  -小于   无符号，恰好等于</span>
<span class="code-line"></span>
<span class="code-line">b 块</span>
<span class="code-line">c 字节</span>
<span class="code-line">w 字（2字节）</span>
<span class="code-line">k 千字节</span>
<span class="code-line">M 兆字节</span>
<span class="code-line">G 吉字节</span>
</pre></div>
<p>删除匹配的文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -type f -name "*.swp" -delete</span>
<span class="code-line">#注意：-delete位置一定是最后</span>
</pre></div>
<p>文件权限及所有权</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -type f -perm 644 -print</span>
<span class="code-line"></span>
<span class="code-line">find . -type f -user slynux -print</span>
</pre></div>
<p>执行命令或动作(最强大的命令)</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -type f -user root -exec chown slynux {} \;</span>
<span class="code-line">find . -type f -exec cp {} OLD \;</span>
<span class="code-line">find . -iname "abc.txt" -exec md5sum {} \;</span>
<span class="code-line"></span>
<span class="code-line">{} 江北替换成对应文件名</span>
<span class="code-line">exec无法结合多个命令，可以将多个命令放入脚本，调用之</span>
</pre></div>
<p>跳过指定目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . \( -name ".git" -prune \) -name '*.txt'</span>
</pre></div>
<h3 id="xargs">xargs</h3>
<p>将标准输入数据转化成命令行参数</p>
<p>将stdin接收到的数据重新格式化，再将其作为参数传给其他命令</p>
<p>多行输入转化成单行输出</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat  example.txt | xargs  #空格替换掉\n</span>
</pre></div>
<p>切成多行，每行n个参数</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat examplet.txt | xargs -n 3</span>
</pre></div>
<p>可以指定分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "aaaXbbbXccc" | xargs -d 'X'</span>
</pre></div>
<p>将参数传递给脚本(类似循环)</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat args.txt | xargs -n 1 ./cecho.sh</span>
<span class="code-line"></span>
<span class="code-line">./cecho.sh -p arg1 1</span>
<span class="code-line">需要变更</span>
<span class="code-line">cat args.txt | xargs -I {} ./cecho.sh -p {} 1</span>
</pre></div>
<p>find与xargs组合</p>
<div class="monokai"><pre><span class="code-line"><span></span>find . -type f -name "*.txt" -print | xargs rm -rf</span>
</pre></div>
<p>其他</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">cat file | ( while read arg; do cat </span><span class="p">$</span><span class="nv">arg</span><span class="x">; done )</span></span>
<span class="code-line"><span class="x">cat file | xargs -I </span><span class="err">{</span><span class="x">} cat </span><span class="err">{</span><span class="x">}</span></span>
</pre></div>
<h3 id="tr">tr</h3>
<p>tr可以对来自标准输入的字符进行替换，删除以及压缩(translate, 可以将一组字符变成另一组字符)</p>
<p>tr只能通过stdin，无法通过其他命令行进行接收参数</p>
<p>格式</p>
<div class="monokai"><pre><span class="code-line"><span></span>tr [options] source-char-set replace-char-set</span>
</pre></div>
<p>选项</p>
<div class="monokai"><pre><span class="code-line"><span></span>-c 取source-char-set补集，通常与-d/-s配合</span>
<span class="code-line">-d 删除字source-char-set中的所列的字符</span>
<span class="code-line">-s 浓缩重复字符，连续多个变成一个</span>
</pre></div>
<p>字符替换</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat /proc/12501/environ | tr '\0' '\n'</span>
</pre></div>
<p>大小写替换</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo  "HELLO" | tr 'A-Z' 'a-z'</span>
<span class="code-line">cat text | tr '\t' ' '</span>
</pre></div>
<p>删除字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "hello 123 world 456"| tr -d '0-9'</span>
<span class="code-line">hello  world</span>
</pre></div>
<p>字符集补集</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "hello 1 char 2" | tr -d -c '0-9'  #删除非0-9</span>
<span class="code-line">12</span>
</pre></div>
<p>压缩字符</p>
<p>连续的重复字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "GNU is    not UNix" | tr -s ' '</span>
</pre></div>
<p>字符类</p>
<div class="monokai"><pre><span class="code-line"><span></span>alnum 字母和数字</span>
<span class="code-line">alpha 字母</span>
<span class="code-line">cntrl 控制字符</span>
<span class="code-line">digit 数字</span>
<span class="code-line">graph 图形字符</span>
<span class="code-line">lower 小写字母</span>
<span class="code-line">print 可打印字符</span>
<span class="code-line">punct 标点符号</span>
<span class="code-line">space 空白字符</span>
<span class="code-line">upper 大写字母</span>
<span class="code-line">xdigit 十六进制字符</span>
<span class="code-line"></span>
<span class="code-line">tr '[:lower:]' '[:upper:]'</span>
</pre></div>
<h3 id="md5sum">md5sum</h3>
<p>32个字符的十六进制串</p>
<div class="monokai"><pre><span class="code-line"><span></span>md5sum filename</span>
<span class="code-line">md5sum filename1 filename2</span>
</pre></div>
<h3 id="sha1sum">sha1sum</h3>
<p>40个字符十六进制串</p>
<div class="monokai"><pre><span class="code-line"><span></span>sha1sum file</span>
</pre></div>
<h3 id="dui-mu-lu-jin-xing-xiao-yan">对目录进行校验</h3>
<p>需安装md5deep软件包</p>
<div class="monokai"><pre><span class="code-line"><span></span>md5deep/sha1deep</span>
<span class="code-line">md5deep -rl dirname</span>
<span class="code-line">         r递归，l相对路径</span>
</pre></div>
<h3 id="sort">sort</h3>
<p>语法</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort [options] [file(s)]</span>
<span class="code-line"></span>
<span class="code-line">-c 检查是否已排序</span>
<span class="code-line">-u 丢弃所有具有相同键值的记录</span>
<span class="code-line"></span>
<span class="code-line">-b 忽略开头空白</span>
<span class="code-line">-d 字典序</span>
<span class="code-line">-g 一般数值，以浮点数类型比较字段，仅支持gnu</span>
<span class="code-line">-i 忽略无法打印的字符</span>
<span class="code-line"></span>
<span class="code-line">-k 定义排序键值字段</span>
<span class="code-line">-n 以整数类型比较字段</span>
<span class="code-line">-r 倒转</span>
<span class="code-line">-o 输出到指定文件</span>
</pre></div>
<p>排序</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort file1 &gt; file1.sorted</span>
<span class="code-line">sort -o file1.sored file1</span>
</pre></div>
<p>按数字, 要明确</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort -n file1</span>
</pre></div>
<p>逆序</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort -r file</span>
</pre></div>
<p>测试一个文件是否已经被排过序</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort -C file</span>
<span class="code-line">if [ $? -eq 0 ]; then</span>
<span class="code-line">    echo ssss</span>
<span class="code-line">fi</span>
</pre></div>
<p>合并两个排过序的文件，并不需要对合并后的文件进行再排序</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort -m sorted1 sorted2</span>
</pre></div>
<p>根据键或者列排序(按照哪一个列)</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort -k 1 data</span>
</pre></div>
<p>限定特定范围内一组字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>key=char4-char8</span>
<span class="code-line">sort -k 2,3 data</span>
<span class="code-line"></span>
<span class="code-line">sort -k2.4,5.6 file</span>
<span class="code-line">第二个字段的第四个字符开始比较，直到第五个字段的第六个字符</span>
</pre></div>
<p>忽略前导空白及字典序排序</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort -bd unsorted.txt</span>
</pre></div>
<p>去重</p>
<div class="monokai"><pre><span class="code-line"><span></span>sort a.txt | uniq</span>
<span class="code-line">sort -u a.txt</span>
</pre></div>
<h3 id="uniq">uniq</h3>
<p>用法</p>
<div class="monokai"><pre><span class="code-line"><span></span>uniq file</span>
</pre></div>
<p>只显示未重复的记录</p>
<div class="monokai"><pre><span class="code-line"><span></span>uniq -u file</span>
</pre></div>
<p>找出重复的行</p>
<div class="monokai"><pre><span class="code-line"><span></span>uniq -d file</span>
<span class="code-line">-s 可指定跳过前N个字符</span>
<span class="code-line">-w 指定用于比较的最大字符数</span>
</pre></div>
<p>统计各行出现的次数</p>
<div class="monokai"><pre><span class="code-line"><span></span>uniq -c file</span>
</pre></div>
<p>p57</p>
<h3 id="tempfile">tempfile</h3>
<p>只有在基于Debian的发布版才有(Ubuntu/Debian)</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">temp_file=</span><span class="p">$(</span><span class="err">tempfile</span><span class="p">)</span><span class="x"></span></span>
<span class="code-line"><span class="x">等同</span></span>
<span class="code-line"><span class="x">temp_file="/tmp/file-</span><span class="p">$</span><span class="nv">RANDOM</span><span class="x">"</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="err">#</span><span class="p">$$</span><span class="x">为进程id</span></span>
<span class="code-line"><span class="x">temp_file="/tmp/var.</span><span class="p">$$</span><span class="x">"</span></span>
</pre></div>
<h3 id="split">split</h3>
<p>按大小分割文件, 单位k(KB), M, G, c(byte), w(word)</p>
<div class="monokai"><pre><span class="code-line"><span></span>split -b 10k data.file</span>
</pre></div>
<p>-d数字后缀，-a后缀长度</p>
<div class="monokai"><pre><span class="code-line"><span></span>split -b 10k data.file -d -a 4</span>
</pre></div>
<p>分割后指定文件名前缀</p>
<div class="monokai"><pre><span class="code-line"><span></span>split -b 10k data.file file_prefix</span>
<span class="code-line"></span>
<span class="code-line">设置后缀格式</span>
<span class="code-line">split -b 10k data.file -d -a 4 file_prefix</span>
</pre></div>
<p>根据行数分割</p>
<div class="monokai"><pre><span class="code-line"><span></span>spilt -l 10 data</span>
</pre></div>
<p>其扩展是csplit，可根据文件特性切分，关注</p>
<h3 id="bashbian-liang-pi-pei-qie-fen">bash变量匹配切分</h3>
<p>sample.jpg</p>
<div class="monokai"><pre><span class="code-line"><span></span>file_jpg="sample.jpg"</span>
<span class="code-line"></span>
<span class="code-line">从右向左匹配</span>
<span class="code-line"><span class="cp">${</span><span class="n">file_jpg</span><span class="o">%.*</span><span class="cp">}</span></span>
<span class="code-line">#sample</span>
<span class="code-line"></span>
<span class="code-line">从左向右匹配</span>
<span class="code-line"><span class="cp">${</span><span class="n">file_jpg</span><span class="c1">#.*</span><span class="cp">}</span></span>
<span class="code-line">#jpg</span>
<span class="code-line"></span>
<span class="code-line">% # 属于非贪婪</span>
<span class="code-line">%% ## 属于贪婪</span>
</pre></div>
<p>贪婪非贪婪</p>
<div class="monokai"><pre><span class="code-line"><span></span>var=hack.fun.book.txt</span>
<span class="code-line"><span class="cp">${</span><span class="n">var</span><span class="o">%.*</span><span class="cp">}</span> #hack.fun.book</span>
<span class="code-line"><span class="cp">${</span><span class="n">var</span><span class="o">%%.*</span><span class="cp">}</span> #hack</span>
<span class="code-line"></span>
<span class="code-line"><span class="cp">${</span><span class="n">var</span><span class="c1">#.*</span><span class="cp">}</span> #fun.book.txt</span>
<span class="code-line"><span class="cp">${</span><span class="n">var</span><span class="c1">##.*</span><span class="cp">}</span> #txt</span>
</pre></div>
<h3 id="expect">expect</h3>
<p>实现自动化</p>
<div class="monokai"><pre><span class="code-line"><span></span>spawn ./ineractive.sh</span>
<span class="code-line">expect "Enter the number"</span>
<span class="code-line">send "1\n"</span>
<span class="code-line">expect "Enter name:"</span>
<span class="code-line">send "hello\n"</span>
<span class="code-line">expect eof</span>
<span class="code-line"></span>
<span class="code-line">spawn指定需要自动化的命令</span>
<span class="code-line">expect提供需要等待的消息</span>
<span class="code-line">send发送消息</span>
<span class="code-line">expect eof指明命令交互结束</span>
</pre></div>
<h3 id="dd">dd</h3>
<p>生成任意大小的文件</p>
<div class="monokai"><pre><span class="code-line"><span></span># 创建一个1M大小的文件junk.data</span>
<span class="code-line">bs=2M count=2 则文件大小4M</span>
<span class="code-line"></span>
<span class="code-line">dd if=/dev/zero of=junk.data bs=1M count=1</span>
<span class="code-line">   输入文件     输出文件     块大小   复制块数</span>
<span class="code-line"></span>
<span class="code-line">块大小单位</span>
<span class="code-line">字节(1B) c</span>
<span class="code-line">字(2B)   w</span>
<span class="code-line">块(512B)   b</span>
<span class="code-line">千字节(1024B) k</span>
<span class="code-line">兆字节(1024KB) M</span>
<span class="code-line">吉字节(1024MB) G</span>
</pre></div>
<h3 id="comm">comm</h3>
<p>两个文件之间比较，输出三列</p>
<div class="monokai"><pre><span class="code-line"><span></span>onleA \t onlyB \t bothAB</span>
<span class="code-line"></span>
<span class="code-line">comm A B -1 -2 #删除第一第二列</span>
<span class="code-line">-3 删除第三列</span>
<span class="code-line"></span>
<span class="code-line">可以得到A^B  A-B B-A</span>
</pre></div>
<h3 id="mkdir">mkdir</h3>
<p>“mkdir”(Make directory)命令在命名路径下创建新的目录。然而如果目录已经存在了，那么它就会返回一个错误信息”不能创建文件夹，文件夹已经存在了”(“cannot create folder, folder already exists”)</p>
<div class="monokai"><pre><span class="code-line"><span></span>mkdir dirpath</span>
<span class="code-line"></span>
<span class="code-line">mkdir -p dirpath1/dirpath2</span>
<span class="code-line"></span>
<span class="code-line">#一次多个目录</span>
<span class="code-line">mkdir -p /home/user/{test,test1,test2}</span>
</pre></div>
<p>注意：目录只能在用户拥有写权限的目录下才能创建</p>
<h3 id="ls">ls</h3>
<p>ls命令是列出目录内容(List Directory Contents)的意思。运行它就是列出文件夹里的内容，可能是文件也可能是文件夹</p>
<p>ls文件的内容关系</p>
<div class="monokai"><pre><span class="code-line"><span></span>- 普通文件</span>
<span class="code-line">d 目录</span>
<span class="code-line">c 字符设备</span>
<span class="code-line">b 块设备</span>
<span class="code-line">l 符号链接</span>
<span class="code-line">s 套接字</span>
<span class="code-line">p 管道</span>
<span class="code-line"></span>
<span class="code-line">文件权限序列</span>
<span class="code-line">rwx</span>
<span class="code-line">rwS  setuid(S)，特殊权限, 出现在x的位置, 允许用户以其拥有者的权限来执行文件, 即使这个可执行文件是由其他用户运行的</span>
<span class="code-line"></span>
<span class="code-line">目录</span>
<span class="code-line">r,允许读取目录中文件和子目录列表</span>
<span class="code-line">w,允许在目录中创建或删除文件或目录</span>
<span class="code-line">x,指明是否可以访问目录中的文件和子目录</span>
<span class="code-line">rwt/rwT 粘滞位，只有创建该目录的用户才能删除目录中的文件，即使用户组和其他用户也有写权限，典型例子/tmp, 写保护</span>
</pre></div>
<p>查看目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>ls -d */</span>
<span class="code-line">ls -F | grep "/$"</span>
<span class="code-line">ls -l | grep "^d"</span>
<span class="code-line">find . -type d -maxdepth 1 -print</span>
</pre></div>
<p>其他</p>
<div class="monokai"><pre><span class="code-line"><span></span>ls -l    命令已详情模式(long listing fashion)列出文件夹的内容</span>
<span class="code-line">ls -a    命令会列出文件夹里的所有内容，包括以”.”开头的隐藏文件</span>
</pre></div>
<h3 id="chmod">chmod</h3>
<p>设置文件权限</p>
<p>“chmod”命令就是改变文件的模式位。chmod会根据要求的模式来改变每个所给的文件，文件夹，脚本等等的文件模式（权限）。</p>
<p>设置权限</p>
<div class="monokai"><pre><span class="code-line"><span></span>user group others all</span>
<span class="code-line">u    g     o      a</span>
<span class="code-line"></span>
<span class="code-line">chmod u=rwx g=rw o=r filename</span>
<span class="code-line"></span>
<span class="code-line">chmod u+x filename</span>
<span class="code-line">chomd a+x filename #所有</span>
<span class="code-line"></span>
<span class="code-line">chmod a-x filename</span>
<span class="code-line"></span>
<span class="code-line">chmod 764 filename</span>
<span class="code-line"></span>
<span class="code-line">#设置粘滞位</span>
<span class="code-line">chmod a+t dirname</span>
<span class="code-line"></span>
<span class="code-line">#递归改变</span>
<span class="code-line"></span>
<span class="code-line">chmod 777 . -R</span>
</pre></div>
<p>注意：对于系统管理员和用户来说，这个命令是最有用的命令之一了。在多用户环境或者服务器上，对于某个用户，如果设置了文件不可访问，那么这个命令就可以解决，如果设置了错误的权限，那么也就提供了为授权的访问。</p>
<h3 id="chown">chown</h3>
<p>每个文件都属于一个用户组和一个用户“chown”命令用来改变文件的所有权，所以仅仅用来管理和提供文件的用户和用户组授权。</p>
<p>改变所有权</p>
<div class="monokai"><pre><span class="code-line"><span></span>chown user.group filename</span>
</pre></div>
<p>递归</p>
<div class="monokai"><pre><span class="code-line"><span></span>chown -R user.group .</span>
</pre></div>
<p>每次都以其他用户身份执行(允许其他用户以文件所有者的身份来执行)</p>
<div class="monokai"><pre><span class="code-line"><span></span>chomod +s executable_file</span>
<span class="code-line"></span>
<span class="code-line">chown root.root executable_file</span>
<span class="code-line">chmod +s executable_file</span>
<span class="code-line">./executable_file</span>
</pre></div>
<h3 id="chattr">chattr</h3>
<p>创建不可修改文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>chattr +i file</span>
</pre></div>
<p>一旦被设置为不可修改, 任何用户包括超级用户都不能删除该文件, 除非其不可修改的属性被移除</p>
<div class="monokai"><pre><span class="code-line"><span></span>chattr -i file</span>
</pre></div>
<h3 id="touch">touch</h3>
<p>“touch”命令代表了将文件的访问和修改时间更新为当前时间。</p>
<p>touch命令只会在文件不存在的时候才会创建它(空白文件)。如果文件已经存在了，它会更新时间戳，但是并不会改变文件的内容。</p>
<p>空白文件</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">touch filename</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">for name </span><span class="err">{</span><span class="x">1..100}.txt</span></span>
<span class="code-line"><span class="x">do</span></span>
<span class="code-line"><span class="x">    touch </span><span class="p">$</span><span class="nv">name</span><span class="x"></span></span>
<span class="code-line"><span class="x">done</span></span>
</pre></div>
<p>修改文件访问时间</p>
<div class="monokai"><pre><span class="code-line"><span></span>touch -a "Fri Jun 25 20:50:14 IST 1999" filename</span>
<span class="code-line">touch -m #修改文件内容的修改时间</span>
</pre></div>
<p>修改文件或目录的时间戳(YYMMDDhhmm)</p>
<div class="monokai"><pre><span class="code-line"><span></span>touch -t 0712250000 file</span>
</pre></div>
<p>注意：touch 可以用来在用户拥有写权限的目录下创建不存在的文件。</p>
<h3 id="ln">ln</h3>
<p>建立软连接</p>
<div class="monokai"><pre><span class="code-line"><span></span>ln -s target symbolic_link_name</span>
</pre></div>
<p>如果目的路径已经存在，而没有指定 -f 标志，ln 命令不会创建新的链接，而是向标准错误写一条诊断消息并继续链接剩下的 SourceFiles。</p>
<p>-f 促使 ln 命令替换掉任何已经存在的目的路径</p>
<h3 id="readlink">readlink</h3>
<p>读取链接对应真是路径</p>
<div class="monokai"><pre><span class="code-line"><span></span>readlink web</span>
<span class="code-line"></span>
<span class="code-line"> readlink ~/.vim</span>
<span class="code-line"> /Users/ken/github/k-vim</span>
</pre></div>
<h3 id="file">file</h3>
<p>通过查看文件内容来找出特定类型的文件</p>
<p>打印文件类型信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>file filename</span>
</pre></div>
<p>打印不包含文件名在内</p>
<div class="monokai"><pre><span class="code-line"><span></span>file -b filename</span>
</pre></div>
<p>e.g.</p>
<div class="monokai"><pre><span class="code-line"><span></span>file /etc/passwd</span>
<span class="code-line">/etc/passwd: ASCII English text</span>
<span class="code-line"></span>
<span class="code-line">file -b /etc/passwd</span>
<span class="code-line">ASCII English text</span>
</pre></div>
<h3 id="du-wen-jian">读文件</h3>
<div class="monokai"><pre><span class="code-line"><span></span>while read line;</span>
<span class="code-line">do</span>
<span class="code-line">    something</span>
<span class="code-line">done &lt; filename</span>
</pre></div>
<h3 id="diff">diff</h3>
<p>生成文件差异</p>
<p>非一体化</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="gh">diff version1.txt version2.txt</span></span>
</pre></div>
<p>一体化, 可读性更好</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="gh">diff -u version.txt</span></span>
</pre></div>
<p>使用patch将命令应用于任意一个文件</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="gh">diff -u version1.txt version2.txt &gt; version.patch</span></span>
<span class="code-line">patch -p1 version1.txt &lt; version.patch</span>
</pre></div>
<p>递归作用于目录</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="gh">diff -Naur directory1 directory2</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="gd">-N 所有缺失的文件作为空文件</span></span>
<span class="code-line"><span class="gd">-a 所有文件视为文本文件</span></span>
<span class="code-line"><span class="gd">-u 一体化输出</span></span>
<span class="code-line"><span class="gd">-r 递归遍历</span></span>
</pre></div>
<h3 id="head">head</h3>
<p>前10行打印</p>
<div class="monokai"><pre><span class="code-line"><span></span>head file</span>
</pre></div>
<p>前n行</p>
<div class="monokai"><pre><span class="code-line"><span></span>head -n 4 file</span>
</pre></div>
<p>扣除最后N行之外的所有行</p>
<div class="monokai"><pre><span class="code-line"><span></span>head -n -5 file</span>
</pre></div>
<h3 id="tail">tail</h3>
<p>最后10行</p>
<div class="monokai"><pre><span class="code-line"><span></span>tail file</span>
</pre></div>
<p>打印最后五行</p>
<div class="monokai"><pre><span class="code-line"><span></span>tail -n 5 file</span>
<span class="code-line">tail -5 file</span>
</pre></div>
<p>扣除前n行</p>
<div class="monokai"><pre><span class="code-line"><span></span>tail -n +(N+1)</span>
</pre></div>
<p>实时动态打印</p>
<div class="monokai"><pre><span class="code-line"><span></span>tail -f growing_file</span>
</pre></div>
<p>当某个给定进程结束后,  tail随之终结</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">tail -f file --PID </span><span class="p">$</span><span class="nv">PID</span><span class="x"></span></span>
</pre></div>
<h3 id="pushdpopd">pushd/popd</h3>
<p>将当前路径压入栈</p>
<div class="monokai"><pre><span class="code-line"><span></span>pushd</span>
</pre></div>
<p>压入某个路径</p>
<div class="monokai"><pre><span class="code-line"><span></span>pushd /home/ken</span>
</pre></div>
<p>查看当前路径列表</p>
<div class="monokai"><pre><span class="code-line"><span></span>dirs</span>
</pre></div>
<p>切换到某一个</p>
<div class="monokai"><pre><span class="code-line"><span></span>#dirs从左到右编号 0 -</span>
<span class="code-line">pushd +3</span>
</pre></div>
<p>移除最近压入栈的路径并切换到下一个目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>popd</span>
</pre></div>
<h3 id="cd">cd</h3>
<p>经常使用的“cd”命令代表了改变目录。它在终端中改变工作目录来执行，复制，移动，读，写等等操作</p>
<p>切换到上一目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>cd -</span>
</pre></div>
<p>会到HOME目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>cd</span>
<span class="code-line">cd ~</span>
</pre></div>
<p>会到上一级目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>cd ..</span>
</pre></div>
<h3 id="wc">wc</h3>
<p>Word Count</p>
<p>统计行数</p>
<div class="monokai"><pre><span class="code-line"><span></span>wc -l file</span>
</pre></div>
<p>统计单词数</p>
<div class="monokai"><pre><span class="code-line"><span></span>wc -w file</span>
</pre></div>
<p>统计字符数</p>
<div class="monokai"><pre><span class="code-line"><span></span>wc -c file</span>
</pre></div>
<p>统计所有</p>
<div class="monokai"><pre><span class="code-line"><span></span>wc file</span>
</pre></div>
<p>统计最长行的长度</p>
<div class="monokai"><pre><span class="code-line"><span></span>wc file -L</span>
</pre></div>
<h3 id="tree">tree</h3>
<p>以图形化的树状结构打印文件和目录的结构，需要自行安装</p>
<div class="monokai"><pre><span class="code-line"><span></span>tree ~/unixfile</span>
</pre></div>
<p>重点标记出匹配某种样式的文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tree PATH -P "*.sh"</span>
</pre></div>
<p>只标记符合样式之外的文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tree path -I PATTERN</span>
</pre></div>
<p>同时打印文件和目录大小</p>
<div class="monokai"><pre><span class="code-line"><span></span>tree -h</span>
</pre></div>
<h3 id="grep">grep</h3>
<p>文本搜索工具, 支持正则表达式和通配符</p>
<p>‘grep‘命令搜索指定文件中包含给定字符串或者单词的行</p>
<p>基本用法</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep "match_pattern" file1 file2</span>
</pre></div>
<p>使用颜色重点标记</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep word filename --color=auto</span>
</pre></div>
<p>扩展型使用正则</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -E "[a-z]+"</span>
<span class="code-line">egrep "[a-z]+"</span>
</pre></div>
<p>只输出匹配到的文本部分</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -o word filename</span>
</pre></div>
<p>除匹配行外的所有行</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -v word filename</span>
</pre></div>
<p>统计匹配行数</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -c 'text' filename</span>
</pre></div>
<p>打印出包含匹配字符串的行数</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep linux -n filename</span>
</pre></div>
<p>打印样式匹配所位于的字符或字节的偏移</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "gnu is not unix" | grep -b -o "not"</span>
</pre></div>
<p>搜索多个文件，找出匹配文本位于哪个文件中</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -l linux file1 file2</span>
<span class="code-line">取反</span>
<span class="code-line">grep -L</span>
</pre></div>
<p>递归搜索目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -R "text" dir</span>
</pre></div>
<p>忽略大小写</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -i "hello" filename</span>
</pre></div>
<p>匹配多个样式</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -e "pattern1" -e "pattern2" file</span>
</pre></div>
<p>运行匹配脚本</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -f pattern_file source_file</span>
<span class="code-line"></span>
<span class="code-line">pattern_file:</span>
<span class="code-line">hello</span>
<span class="code-line">cool</span>
</pre></div>
<p>在搜索中包含、排除文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep --include *.{c,cpp} word file</span>
</pre></div>
<p>排除</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep --exclude "Readme" filename</span>
<span class="code-line">--exclude-dir</span>
</pre></div>
<p>静默输出，用于判断(不会产生任何输出)</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -q word file</span>
<span class="code-line">if [ $? -eq 0 ]</span>
</pre></div>
<p>打印匹配行之前，之后的行</p>
<div class="monokai"><pre><span class="code-line"><span></span>grep -A 3 之后3行</span>
<span class="code-line">grep -B 3 之前</span>
<span class="code-line">grep -C 3 前后</span>
</pre></div>
<p>使用行缓冲</p>
<div class="monokai"><pre><span class="code-line"><span></span>在使用tail -f命令时是可以及时看到文件的变化的，但是如果再加上一个grep命令，可能看到的就不那么及时了，</span>
<span class="code-line">因为grep命令在buffer写不满时就不输出，可以通过选项  --line-buffered 来搞定，如：</span>
<span class="code-line"></span>
<span class="code-line">tail -f file.txt | grep something  --line-buffered</span>
</pre></div>
<h3 id="cut">cut</h3>
<p>语法</p>
<div class="monokai"><pre><span class="code-line"><span></span>cut -c list [ file ... ]</span>
<span class="code-line">cut -f list [ -d delim ] [ file ...]</span>
<span class="code-line"></span>
<span class="code-line">-c list 以字符为主，作剪切操作</span>
<span class="code-line">-f list 以字段为主，作剪切操作</span>
</pre></div>
<p>提取字段或列</p>
<div class="monokai"><pre><span class="code-line"><span></span>#第一列</span>
<span class="code-line">cut -f1 filenam</span>
<span class="code-line"></span>
<span class="code-line">#第二三列</span>
<span class="code-line">cut -f2,3 filename</span>
</pre></div>
<p>提取补集</p>
<div class="monokai"><pre><span class="code-line"><span></span>cut -f1 --complement filename</span>
</pre></div>
<p>指定字段分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span>cut -d ";" -f2 filename</span>
<span class="code-line">cut -d : -f 1,5 /etc/passwd</span>
</pre></div>
<p>指定字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>-b 字节</span>
<span class="code-line">-c 字符</span>
<span class="code-line">-f 字段</span>
<span class="code-line"></span>
<span class="code-line">cut -c1-5 filename</span>
<span class="code-line">N-</span>
<span class="code-line">N-M</span>
<span class="code-line">-M</span>
<span class="code-line"></span>
<span class="code-line">ls -l | cut -c 1-10</span>
</pre></div>
<p>指定输出分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span>cut -c1-3,6-9 --output-delimiter ","</span>
</pre></div>
<h3 id="join">join</h3>
<p>语法</p>
<div class="monokai"><pre><span class="code-line"><span></span>join [options] file1 file2</span>
<span class="code-line"></span>
<span class="code-line">选项</span>
<span class="code-line">-1 field1</span>
<span class="code-line">-2 field2</span>
<span class="code-line">-o file.field</span>
<span class="code-line">-t separator</span>
</pre></div>
<p>例子</p>
<div class="monokai"><pre><span class="code-line"><span></span>join file1 file2</span>
</pre></div>
<h3 id="sed">sed</h3>
<p>sed(Stream editor)流编辑器, 可以配合正则使用, 进行替换等</p>
<p>sed替换语法</p>
<div class="monokai"><pre><span class="code-line"><span></span>sed 's/pattern/replace_string/' file</span>
</pre></div>
<p>将结果直接运用于源文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>-i 用于, 直接修改源文件</span>
<span class="code-line"></span>
<span class="code-line">替换第一个</span>
<span class="code-line">sed -i 's/pattern/replace_string/' file</span>
<span class="code-line"></span>
<span class="code-line">替换第二个</span>
<span class="code-line">sed -i 's/pattern/replace_string/2' file</span>
<span class="code-line"></span>
<span class="code-line">替换所有</span>
<span class="code-line">sed -i 's/pattern/replace_string/g' file</span>
<span class="code-line"></span>
<span class="code-line">从第N处开始替换</span>
<span class="code-line">sed -i 's/pattern/replcae_string/2g' file</span>
</pre></div>
<p>移除空白行</p>
<div class="monokai"><pre><span class="code-line"><span></span>sed '/^$/d' file</span>
</pre></div>
<p>已匹配字符串标记</p>
<div class="monokai"><pre><span class="code-line"><span></span>引用匹配到的</span>
<span class="code-line">sed 's/\w\+/[&amp;]/g' filename</span>
</pre></div>
<p>组合多个表达式</p>
<div class="monokai"><pre><span class="code-line"><span></span>sed 'exp1' | sed 'exp2'</span>
<span class="code-line">等价</span>
<span class="code-line">sed 'exp1;exp2'</span>
</pre></div>
<p>使用引用</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">sed "s/</span><span class="p">$</span><span class="nv">text</span><span class="x">/HELLO/"</span></span>
</pre></div>
<p>子串匹配标记(后向引用，最多9个)</p>
<div class="monokai"><pre><span class="code-line"><span></span>sed 's/\([a-z]\+\)' \([A-Z\]\+\)/\2 \1/' filename</span>
</pre></div>
<p>保存到文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>sed 's/pattern/replacement/' -i outfile</span>
</pre></div>
<p>使用其他分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span>sed 's#/home/#/tmp/#'</span>
</pre></div>
<h3 id="awk">awk</h3>
<p>基本结构</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk -F '-' 'BEGIN{statements} {statements} END{statements}' file</span>
<span class="code-line">表达式中单引号可以换成双引号</span>
<span class="code-line">BEGIN -&gt; 每一行，执行statements, 执行END</span>
</pre></div>
<p>打印某一列</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk -F '-' '{print $0}' file #全部</span>
<span class="code-line">awk -F '-' '{print $2}' file #第二列</span>
</pre></div>
<p>print拼接字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk '{var="v1"; var1="v2"; print var1"-"var2;}'</span>
</pre></div>
<p>特殊变量</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">NR nuber of records, 记录数</span></span>
<span class="code-line"><span class="x">NF number of fields, 字段数</span></span>
<span class="code-line"><span class="p">$</span><span class="x">0 当前行文本</span></span>
<span class="code-line"><span class="p">$</span><span class="x">1 第一字段</span></span>
<span class="code-line"><span class="p">$</span><span class="x">2 第二字段</span></span>
<span class="code-line"><span class="p">$</span><span class="nv">NF</span><span class="x"> 最后一个字段</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">FILENAME 当前输入文件的名称</span></span>
<span class="code-line"><span class="x">FNR 当前输入文件记录数</span></span>
<span class="code-line"><span class="x">FS 字段分隔字符</span></span>
<span class="code-line"><span class="x">OFS 输出字段分隔符，默认" "</span></span>
<span class="code-line"><span class="x">ORS 输出记录分隔符，默认"\n"</span></span>
</pre></div>
<p>统计行数</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk 'END{print NF}'</span>
</pre></div>
<p>将外部变量值传递给awk</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">awk -v VARIABLE=</span><span class="p">$</span><span class="nv">VAR</span><span class="x"> '</span><span class="err">{</span><span class="x"> print VARIABLE }'</span></span>
<span class="code-line"><span class="x">awk '</span><span class="err">{</span><span class="x">print v1, v2}' v1=</span><span class="p">$</span><span class="nv">var1</span><span class="x"> v2=</span><span class="p">$</span><span class="nv">var2</span><span class="x"></span></span>
</pre></div>
<p>读取行</p>
<div class="monokai"><pre><span class="code-line"><span></span>seq 5 | awk '{ getline var; print var}'</span>
</pre></div>
<p>进行行过滤</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk 'NR&lt;5' #行号小于5</span>
<span class="code-line">awk 'NR==1,NR==4' #行号在1到5之间</span>
<span class="code-line">awk '/linux/' #包含样式linux</span>
<span class="code-line">awk '!/linux/' #不包含</span>
<span class="code-line">awk '$1 ~/jones/' #第一个字段包含jones</span>
<span class="code-line"></span>
<span class="code-line">tail file</span>
<span class="code-line">awk 'NR &lt;= 10' file</span>
</pre></div>
<p>设定分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">awk -F: '</span><span class="err">{</span><span class="x"> print </span><span class="p">$</span><span class="nv">NF</span><span class="x"> }' file</span></span>
</pre></div>
<p>设定输出分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk -F: -v "OFS=-" '{print $1,$2}' /etc/passwd</span>
</pre></div>
<p>打印空行</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk 'NF&gt;0 {print $0}'</span>
<span class="code-line">or</span>
<span class="code-line">awk 'NF&gt;0' #未指定action默认打印</span>
</pre></div>
<p>print和printf</p>
<div class="monokai"><pre><span class="code-line"><span></span>awk -F: '{print "User", $1, "is really", $5}' /etc/passwd</span>
<span class="code-line">awk -F: '{printf "User %s is really %s\n", $1, $5}' /etc/passwd</span>
</pre></div>
<p>awk中使用循环</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">for(i=0;i&lt;10;i++) </span><span class="err">{</span><span class="x"> print </span><span class="p">$</span><span class="nv">i</span><span class="x">; }</span></span>
<span class="code-line"></span>
<span class="code-line"><span class="x">for(i in array) </span><span class="err">{</span><span class="x"> print array[i] }</span></span>
</pre></div>
<p>内建函数</p>
<div class="monokai"><pre><span class="code-line"><span></span>length(str)</span>
<span class="code-line">index(str,search_str)</span>
<span class="code-line">split(str,array,delimiter) 用界定符生成一个字符串列表</span>
<span class="code-line">substr(string, start, end) #子串</span>
<span class="code-line">sub(regex, replacement_str, str) #正则替换首个匹配位置</span>
<span class="code-line">gsub(regex, replacement_str, string) #最后一个匹配位置</span>
<span class="code-line">match(string, regex) #检查是否能够匹配字符串</span>
<span class="code-line">tolower(string) #转小写</span>
<span class="code-line">toupper(string) #转大写</span>
</pre></div>
<p>写成脚本文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>BEGIN {}</span>
<span class="code-line">pattern1 {action1}</span>
<span class="code-line">pattern2 {action2}</span>
<span class="code-line">END {}</span>
</pre></div>
<h3 id="wen-jian-die-dai">文件迭代</h3>
<p>读文件行</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">while read line;</span></span>
<span class="code-line"><span class="x">do</span></span>
<span class="code-line"><span class="x">    echo </span><span class="p">$</span><span class="nv">line</span><span class="x">;</span></span>
<span class="code-line"><span class="x">done &lt; file.txt</span></span>
</pre></div>
<p>迭代每个单词</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">for word in </span><span class="p">$</span><span class="nv">line</span><span class="x">;</span></span>
<span class="code-line"><span class="x">do</span></span>
<span class="code-line"><span class="x">    echo </span><span class="p">$</span><span class="nv">word</span><span class="x">;</span></span>
<span class="code-line"><span class="x">done</span></span>
</pre></div>
<p>迭代每一个字符</p>
<div class="monokai"><pre><span class="code-line"><span></span>for((i=0;i<span class="err">&lt;</span><span class="cp">${</span><span class="c1">#word</span><span class="cp">}</span>;i++))</span>
<span class="code-line">do</span>
<span class="code-line">    echo <span class="cp">${</span><span class="n">word</span><span class="p">:</span><span class="n">i</span><span class="p">:</span><span class="mi">1</span><span class="cp">}</span> ;</span>
<span class="code-line">done</span>
</pre></div>
<h3 id="paste">paste</h3>
<p>按列合并文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>paste file1 file2 file3</span>
</pre></div>
<p>指定分隔符</p>
<div class="monokai"><pre><span class="code-line"><span></span>paste file1 file2 -d ','</span>
</pre></div>
<h3 id="tac">tac</h3>
<p>逆序打印</p>
<div class="monokai"><pre><span class="code-line"><span></span>tac file1 file2</span>
</pre></div>
<h3 id="rev">rev</h3>
<p>接收一个文件或stdin作为输入, 逆序打印每一行内容</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo "abc" | rev</span>
</pre></div>
<h3 id="wget">wget</h3>
<p>Wget是用于非交互式（例如后台）下载文件的免费工具.支持HTTP, HTTPS, FTP协议和 HTTP 代理(选项多, 用法灵活)</p>
<p>一个用于文件下载的命令行工具</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget URL1 URL2</span>
</pre></div>
<p>指定保存文件名</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget URL -O local.txt</span>
</pre></div>
<p>指定日志，默认达到stdout</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget URL -O local.txt -o log.txt</span>
</pre></div>
<p>指定重复尝试次数</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget -t 5 URL</span>
</pre></div>
<p>下载限速</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget --limit-rate 20k url</span>
</pre></div>
<p>指定限额</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget -Q 100m url</span>
</pre></div>
<p>断点续传</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget -c URL</span>
<span class="code-line"></span>
<span class="code-line">$ wget -c -t 100 -T 120 http://www.linux.com/xxxx.data</span>
<span class="code-line"></span>
<span class="code-line">当文件特别大或者网络特别慢的时候，往往一个文件还没有下载完，连接就已经被切断，此时就需要断点续传。</span>
<span class="code-line">wget的断点续传是自动的。</span>
<span class="code-line">-c 选项的作用为断点续传。</span>
<span class="code-line">-t 参数表示重试次数(例如重试100次，-t 100，如果设成-t 0，表示无穷次重试，直到连接成功)</span>
<span class="code-line">-T 参数表示超时等待时间，例如-T 120，表示等待120秒连接不上就算超时</span>
</pre></div>
<p>复制或镜像整个网站</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget --mirror exampledomain.com</span>
<span class="code-line">wget -r -N -l DEPTH URL</span>
<span class="code-line">     递归，允许对文件使用时间戳，层级</span>
<span class="code-line">$ wget -r -np -nd http://www.linux.com/packs/</span>
<span class="code-line"></span>
<span class="code-line">-np 的作用是不遍历父目录</span>
<span class="code-line">-nd 表示不在本机重新创建目录结构</span>
</pre></div>
<p>访问需要认证的HTTP/FTP</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget --user username --password pass URL</span>
</pre></div>
<p>post请求</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget url -post-data "name=value" -O output.html</span>
</pre></div>
<p>批量下载</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget -i downloads.txt #将文件地址写入一个文件</span>
</pre></div>
<p>用wget命令执行ftp下载</p>
<div class="monokai"><pre><span class="code-line"><span></span>wget -m ftp://username:password@hostname</span>
</pre></div>
<h3 id="curl">curl</h3>
<p>基本用法</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl url &gt; index.html</span>
</pre></div>
<p>不显示进度信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl URL --slient</span>
</pre></div>
<p>将内容写入文件，而非标准输出</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl URL --slient -O</span>
</pre></div>
<p>写入指定文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl URL --slient -o filename</span>
</pre></div>
<p>显示进度条</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl url -o index.html --progress</span>
</pre></div>
<p>断点续传</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl -C - URL</span>
</pre></div>
<p>设置参照页字符串</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl --referer Referer_URL target_URL</span>
<span class="code-line">跳转到target_URL,其头部referer为Referer_URL</span>
</pre></div>
<p>设置cookie</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl url --cookie "user=slynux;pass=hack"</span>
<span class="code-line">另存为一个文件</span>
<span class="code-line"></span>
<span class="code-line">curl URL --cookie-jar cookie_file</span>
</pre></div>
<p>设置用户代理</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl URL --user-agent "Mozilla/5.0"</span>
<span class="code-line">头部信息</span>
<span class="code-line">curl -H "Host: www.slynux.org" -H "Accept-language: en" url</span>
</pre></div>
<p>限定下载带宽</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl url --limit-rate 20k</span>
</pre></div>
<p>指定最大下载量(可下载的最大文件大小)</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl url --max-filesize bytes</span>
<span class="code-line">超出限制的话，返回非0</span>
</pre></div>
<p>进行认证</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl -u user:pass url</span>
</pre></div>
<p>只打印头部信息,不下载远程文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl -I url</span>
<span class="code-line">curl -head url</span>
</pre></div>
<p>发送post请求</p>
<div class="monokai"><pre><span class="code-line"><span></span>curl URL -d "va1=1&amp;va2=2"</span>
<span class="code-line">         --data</span>
</pre></div>
<h3 id="lynx">lynx</h3>
<p>将网页以ascii字符形式下载</p>
<div class="monokai"><pre><span class="code-line"><span></span>lynx -dump URL &gt; webpage_as_text.txt</span>
</pre></div>
<p>打印出网站的文本板块而非html</p>
<div class="monokai"><pre><span class="code-line"><span></span>lynx -dump url</span>
</pre></div>
<p>生成信息文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>lynx -traversal url</span>
</pre></div>
<h3 id="tar">tar</h3>
<p>“tar”命令是磁带归档(Tape Archive)，对创建一些文件的的归档和它们的解压很有用。</p>
<p>将多个文件和文件夹保存成单个文件, 同时还能保留所有的文件属性</p>
<p>对文件进行归档</p>
<div class="monokai"><pre><span class="code-line"><span></span>-c create file,创建文件</span>
<span class="code-line">-f specify filename,指定文件名</span>
<span class="code-line"></span>
<span class="code-line">tar -cf output.tar file1 file2 file3</span>
<span class="code-line">tar -cf output.tar *.txt</span>
<span class="code-line"></span>
<span class="code-line">tar -cvf output.tar *.txt</span>
</pre></div>
<p>向归档中追加文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -rvf original.tar new_file</span>
<span class="code-line">-r,追加</span>
</pre></div>
<p>查看过程中更多信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -tvvf archive.tar</span>
<span class="code-line">-v/-vv, verbose</span>
</pre></div>
<p>提取文件或文件夹</p>
<div class="monokai"><pre><span class="code-line"><span></span>-x, exact</span>
<span class="code-line">tar -xf archive.tar</span>
<span class="code-line"></span>
<span class="code-line">-C,指定文件</span>
<span class="code-line">tar -xf archive.tar -C /path/to/extraction_directory</span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line">tar -xvf archive.tar</span>
</pre></div>
<p>提取指定文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -xvf file.tar file1 file4</span>
</pre></div>
<p>拼接两个归档文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -Af file1.tar file2.tar</span>
<span class="code-line">#file2合并到file1中</span>
</pre></div>
<p>只有在文件内容修改时间更新(newer),才进行添加</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -uvvf archive.tar filea</span>
</pre></div>
<p>比较归档文件与文件系统中的内容</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -df archive.tar filename1 filename2</span>
</pre></div>
<p>从归档文件中删除文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -f archive.tar --delete file1 file2</span>
</pre></div>
<p>提取到某个目录</p>
<div class="monokai"><pre><span class="code-line"><span></span> tar zxvf package.tar.gz -C new_dir</span>
</pre></div>
<p>压缩归档文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>gzip/gunzip -&gt; .gz</span>
<span class="code-line">f.tar.gz   -z</span>
<span class="code-line">tar -czvf </span>
<span class="code-line">tar -xzvf</span>
<span class="code-line"></span>
<span class="code-line">bzip/bunzip -&gt; .bz2</span>
<span class="code-line">f.tar.bz2  -j</span>
<span class="code-line"></span>
<span class="code-line">f.tar.lzma --lzma</span>
<span class="code-line">f.tar.lzo</span>
</pre></div>
<p>从归档中排除部分文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -cf arch.tar * --exclude "*.txt"</span>
<span class="code-line">cat list</span>
<span class="code-line">   filea</span>
<span class="code-line">   fileb</span>
<span class="code-line">tar -cf arch.tar * -X list</span>
</pre></div>
<p>排除版本控制文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar --exclude-vcs -czvvf source.tar.gz files</span>
</pre></div>
<p>打印总字节数</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -cf arc.tar * --exclude "*.txt" --totals</span>
</pre></div>
<h3 id="cpio">cpio</h3>
<p>使用频率不高</p>
<p>归档，保留文件属性（权限、所有权等）</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo file1 file2 | cpio -ov &gt; archive.cpio</span>
<span class="code-line">-o 指定输出</span>
<span class="code-line">-v 打印归档文件列表</span>
</pre></div>
<p>列出cpio中的文件内容</p>
<div class="monokai"><pre><span class="code-line"><span></span>cpio -it &lt; archive.cpio</span>
<span class="code-line">-i指定输入</span>
<span class="code-line">-t列出归档文件中的内容</span>
</pre></div>
<h3 id="gzip">gzip</h3>
<p>压缩，会删除源文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>gzip filename</span>
<span class="code-line">#got filename.gz</span>
</pre></div>
<p>解压</p>
<div class="monokai"><pre><span class="code-line"><span></span>gunzip filename.gz</span>
</pre></div>
<p>列出文件属性信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>gzip -l text.gz</span>
</pre></div>
<p>stdin读入文件并写出到stdout</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat file | gzip -c &gt; file.gz</span>
</pre></div>
<p>压缩归档文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -czvvf archive.tar.gz [files]</span>
<span class="code-line">or</span>
<span class="code-line">tar -cvvf archive.tar.gz [files]</span>
<span class="code-line">gzip archive.tar</span>
</pre></div>
<p>指定压缩率</p>
<div class="monokai"><pre><span class="code-line"><span></span>1-9,1最低，但速度最快</span>
<span class="code-line">gzip -9 test.img</span>
</pre></div>
<h3 id="zcat">zcat</h3>
<p>无需解压缩，直接从.gz中提取内容</p>
<div class="monokai"><pre><span class="code-line"><span></span>zcat test.gz</span>
</pre></div>
<h3 id="bzip">bzip</h3>
<p>更大的压缩率</p>
<div class="monokai"><pre><span class="code-line"><span></span>bzip2 filename</span>
</pre></div>
<p>解压缩</p>
<div class="monokai"><pre><span class="code-line"><span></span>bunzip2 filename.bz2</span>
</pre></div>
<p>stdin到stdout</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat file &gt; bzip2 -c &gt; file.tar.bz2</span>
</pre></div>
<p>压缩归档</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -cjvvf archive.tar.bz2 [files]</span>
<span class="code-line">or</span>
<span class="code-line">tar -cvvf archive.tar [files]</span>
<span class="code-line">bzip2 archive.tar</span>
</pre></div>
<p>保留输入文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>bunzip2 test.bz2 -k</span>
</pre></div>
<p>压缩率</p>
<div class="monokai"><pre><span class="code-line"><span></span>bzip2 -9 test.img</span>
</pre></div>
<h3 id="lzma">lzma</h3>
<p>比gzip/bzip2更好的压缩率</p>
<p>压缩</p>
<div class="monokai"><pre><span class="code-line"><span></span>lzma filename</span>
</pre></div>
<p>解压</p>
<div class="monokai"><pre><span class="code-line"><span></span>unlzma filename.lzma</span>
</pre></div>
<p>stdin到stdout</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat file | lzma -c &gt; file.lzma</span>
</pre></div>
<p>创建归档</p>
<div class="monokai"><pre><span class="code-line"><span></span>tar -cavvf archive.tar.lzma [files]</span>
<span class="code-line">    -xavf</span>
</pre></div>
<p>保留输入文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>lzma test.bz2 -k</span>
</pre></div>
<p>压缩率</p>
<div class="monokai"><pre><span class="code-line"><span></span>lzma -9 test.img</span>
</pre></div>
<h3 id="zip">zip</h3>
<p>压缩</p>
<div class="monokai"><pre><span class="code-line"><span></span>zip archive_name.zip [source files/dirs]</span>
</pre></div>
<p>对目录和文件进行递归操作</p>
<div class="monokai"><pre><span class="code-line"><span></span>zip -r archive.zip folder1 file2</span>
</pre></div>
<h3 id="base64">base64</h3>
<p>编码</p>
<div class="monokai"><pre><span class="code-line"><span></span>base64 filename &gt; outfile</span>
<span class="code-line">cat file | base64 &gt; outfile</span>
</pre></div>
<p>解码</p>
<div class="monokai"><pre><span class="code-line"><span></span>base64 -d file &gt; outfile</span>
</pre></div>
<h3 id="md5sum_1">md5sum</h3>
<p>“md5sum”就是计算和检验MD5信息签名。
md5 checksum(通常叫做哈希)使用匹配或者验证文件的文件的完整性，因为文件可能因为传输错误，磁盘错误或者无恶意的干扰等原因而发生改变。</p>
<p>单向散列</p>
<div class="monokai"><pre><span class="code-line"><span></span>md5sum file</span>
<span class="code-line">sha1sum file</span>
</pre></div>
<h3 id="rsync">rsync</h3>
<p>可以对位于不同位置的文件和目录进行备份, 借助差异计算和压缩技术实现最小化数据传输量</p>
<p>要确保远端安装了 openssh</p>
<p>从一个目录复制到另一个目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>rsync -av source_path dest_path</span>
<span class="code-line">-a 进行归档  -v打印细节</span>
<span class="code-line">路径可以使本地，也可以是远端路径</span>
<span class="code-line"></span>
<span class="code-line">e.g.</span>
<span class="code-line">rsync -av /home/test /home/backups/ #复制到backups目录下</span>
<span class="code-line">rsync -av /home/test /home/backups  #创建backups目录, 复制</span>
</pre></div>
<p>备份到远程服务器</p>
<div class="monokai"><pre><span class="code-line"><span></span>rsync -av source_path user@host:PATH</span>
<span class="code-line">可以反向</span>
</pre></div>
<p>改善传输速度</p>
<div class="monokai"><pre><span class="code-line"><span></span>rsync -avz source destination</span>
</pre></div>
<p>排除文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>rsync -avz source dest --exclude "*.txt"</span>
<span class="code-line">                       --exclude-from FILEPATH</span>
<span class="code-line">FILEPATH:</span>
<span class="code-line">*.bak</span>
</pre></div>
<p>更新备份时，删除不存在的文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>rsync -avz source dest --delete</span>
</pre></div>
<h3 id="git">git</h3>
<p>初始化目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>git init</span>
</pre></div>
<p>配置用户信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>git config --global user.name "wklken"</span>
<span class="code-line">git config --global user.email "wklken@yeah.net"</span>
</pre></div>
<p>加到远端</p>
<div class="monokai"><pre><span class="code-line"><span></span>git remote add origin user@remotehost:/home/backup/backup.git</span>
<span class="code-line">git push origin master</span>
</pre></div>
<p>添加</p>
<div class="monokai"><pre><span class="code-line"><span></span>git add *</span>
</pre></div>
<p>删除</p>
<div class="monokai"><pre><span class="code-line"><span></span>git rm *.py</span>
</pre></div>
<p>标记一个检查点</p>
<div class="monokai"><pre><span class="code-line"><span></span>git commit -m "Commit message"</span>
</pre></div>
<p>查看日志</p>
<div class="monokai"><pre><span class="code-line"><span></span>git log</span>
</pre></div>
<p>回滚到某个版本</p>
<div class="monokai"><pre><span class="code-line"><span></span>git checkout hashid [ filename ]</span>
</pre></div>
<p>克隆</p>
<div class="monokai"><pre><span class="code-line"><span></span>git clone url</span>
</pre></div>
<h3 id="dd_1">dd</h3>
<p>Dtat Definiton, 要注意参数顺序, 错误的参数会损毁所有数据</p>
<p>可以用来转换和复制文件，大多数时间是用来复制iso文件(或任何其它文件)到一个usb设备(或任何其它地方)中去，所以可以用来制作USB启动器</p>
<p>语法说明</p>
<div class="monokai"><pre><span class="code-line"><span></span>dd if=SOURCE of=TARGET bs=BLOCK_SIZE count=COUNT</span>
<span class="code-line">if/of  输入/输出文件或设备路径</span>
<span class="code-line">bs块大小</span>
<span class="code-line">count 限制复制到目标的字节数</span>
<span class="code-line"></span>
<span class="code-line">dd if=/dev/zero of=/dev/sda1</span>
<span class="code-line"></span>
<span class="code-line">#制作iso 从cdrom设备读取所有数据, 创建iso文件</span>
<span class="code-line">dd if=/dev/cdrom of=cdrom.iso</span>
</pre></div>
<p>备份恢复</p>
<div class="monokai"><pre><span class="code-line"><span></span>dd if=/dev/sda1 of=x.img</span>
<span class="code-line"></span>
<span class="code-line">dd if=x.img of=/dev/sda1</span>
</pre></div>
<h3 id="mount">mount</h3>
<p>mount 是一个很重要的命令，用来挂载不能自动挂载的文件系统。你需要root权限挂载设备。
在插入你的文件系统后，</p>
<div class="monokai"><pre><span class="code-line"><span></span>mount --bind /source /destination</span>
<span class="code-line"></span>
<span class="code-line">首先运行”lsblk”命令，识别出你的设备，然后把分配的设备名记下来。</span>
<span class="code-line">root@tecmint:~# lsblk</span>
<span class="code-line">创建一个任何名字的目录，但是最好和引用相关。</span>
<span class="code-line"></span>
<span class="code-line">root@tecmint:~# su</span>
<span class="code-line">Password:</span>
<span class="code-line">root@tecmint:~# cd /dev</span>
<span class="code-line">root@tecmint:~# mkdir usb</span>
<span class="code-line">现在将“sdb1”文件系统挂载到“usb”目录.</span>
<span class="code-line">root@tecmint:~# mount /dev/sdb1 /dev/usb</span>
</pre></div>
<p>挂载镜像</p>
<div class="monokai"><pre><span class="code-line"><span></span>mount -o loop file.img /mnt/mount_point</span>
</pre></div>
<h2 id="wang-luo-xiang-guan_1">网络相关</h2>
<h3 id="ifconfig">ifconfig</h3>
<p>显示网络接口、子网掩码等详细信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>ifconfig</span>
<span class="code-line">/sbin/ifconfig</span>
</pre></div>
<p>打印某个特定网络接口</p>
<div class="monokai"><pre><span class="code-line"><span></span>ifconfig iface_name</span>
<span class="code-line"></span>
<span class="code-line">e.g.</span>
<span class="code-line">ifconfig en1</span>
<span class="code-line"></span>
<span class="code-line">HWaddr     MAC地址</span>
<span class="code-line">inet addr  ip地址</span>
<span class="code-line">Bcast      广播地址</span>
<span class="code-line">Mask       子网掩码</span>
</pre></div>
<p>设置网络接口ip</p>
<div class="monokai"><pre><span class="code-line"><span></span>ifconfig wlan0 192.168.0.80</span>
</pre></div>
<p>dns</p>
<div class="monokai"><pre><span class="code-line"><span></span>cat /etc/resolv.conf</span>
<span class="code-line"></span>
<span class="code-line">host google.com #Dns查找</span>
<span class="code-line"></span>
<span class="code-line">nslookup google.com #更详细信息</span>
</pre></div>
<p>修改dns/host</p>
<div class="monokai"><pre><span class="code-line"><span></span>echo nameserver IP_ADDRESS &gt;&gt; /etc/resolv.conf</span>
<span class="code-line"></span>
<span class="code-line">echo ip domain &gt;&gt; /etc/hosts</span>
</pre></div>
<p>ping</p>
<div class="monokai"><pre><span class="code-line"><span></span>ping www.baidu.com</span>
</pre></div>
<p>路由信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>显示路由表</span>
<span class="code-line">route</span>
<span class="code-line"></span>
<span class="code-line">以数字形式显示地址</span>
<span class="code-line">route -n</span>
</pre></div>
<p>设置默认网关</p>
<div class="monokai"><pre><span class="code-line"><span></span>route add default gw 192.168.0.1 wlan0</span>
</pre></div>
<p>trace_route, 显示分组途径的所有网关的地址</p>
<div class="monokai"><pre><span class="code-line"><span></span>traceroute google.com</span>
</pre></div>
<h3 id="ping">ping</h3>
<p>基本</p>
<div class="monokai"><pre><span class="code-line"><span></span>ping ADDRESS  #主机名，域名或ip</span>
</pre></div>
<p>PING命令可以得到RTT(Round Trip Time), 分组从源到目的主机的往返时间, 单位ms</p>
<p>限制发送分组数</p>
<div class="monokai"><pre><span class="code-line"><span></span>ping ADDRESS -c COUNT</span>
<span class="code-line"></span>
<span class="code-line">ping</span>
</pre></div>
<h3 id="fping">fping</h3>
<p>同时ping一组ip, 而且响应非常快</p>
<div class="monokai"><pre><span class="code-line"><span></span>fping -a ip1 ip2 -g</span>
<span class="code-line">fping -a 192.160.1/24 -g</span>
<span class="code-line">fping -a &lt; ip.list</span>
<span class="code-line"></span>
<span class="code-line">-a, 所有活动主机的ip</span>
<span class="code-line">-g, 从IP/mask生成的ip地址范围</span>
</pre></div>
<p>进行dns查询</p>
<div class="monokai"><pre><span class="code-line"><span></span>fping -a -d 2 &gt; /dev/null  &lt; ip.list</span>
</pre></div>
<h3 id="lftp">lftp</h3>
<p>基本用法</p>
<div class="monokai"><pre><span class="code-line"><span></span>lftp username@ftphost</span>
<span class="code-line">cd dir</span>
<span class="code-line">lcd改变本地主机目录</span>
<span class="code-line">mkdir 创建目录</span>
<span class="code-line">get/put 下载上传</span>
<span class="code-line">quit退出</span>
</pre></div>
<h3 id="scp">scp</h3>
<p>scp是 secure copy的缩写, scp是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。</p>
<p>linux的scp命令可以在linux服务器之间复制文件和目录.</p>
<p>拷贝文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>scp filename user@remotehost:/home/pat</span>
<span class="code-line">ip或主机名均可</span>
<span class="code-line"></span>
<span class="code-line">scp SOURCE DESTINATION</span>
</pre></div>
<p>递归复制</p>
<div class="monokai"><pre><span class="code-line"><span></span>scp -r dir1 user@remotehost:/home/backup</span>
</pre></div>
<p>提高拷贝速度</p>
<div class="monokai"><pre><span class="code-line"><span></span>scp  -c arcfour -r -P20755 dir/ 192.168.2.*:/**/**/data/</span>
<span class="code-line">-c arcfour 这个算法没有加校验不保证完整性，注意慎用，内网1000M带宽，默认算法速度只能达到30M/s，用arcfour这个算法速度可以达到50-80M/s</span>
</pre></div>
<h3 id="ssh">SSH</h3>
<p>连接远程</p>
<div class="monokai"><pre><span class="code-line"><span></span>ssh username@remote_host</span>
<span class="code-line"></span>
<span class="code-line">ssh -p port username@remote_host</span>
</pre></div>
<p>执行命令</p>
<div class="monokai"><pre><span class="code-line"><span></span>ssh username@remote_host 'cmd1; cmd2' &gt; stdout.txt 2&gt;errors.txt</span>
</pre></div>
<p>压缩功能</p>
<div class="monokai"><pre><span class="code-line"><span></span>ssh -C user@hostname 'cmds'</span>
</pre></div>
<p>打通ssh</p>
<div class="monokai"><pre><span class="code-line"><span></span>1.创建SSH密钥</span>
<span class="code-line">  ssh-keygen -t rsa</span>
<span class="code-line">  公钥, ~/.ssh/id_rsa.pub</span>
<span class="code-line">2.登陆远端服务器, 将公钥写入 ~/.ssh/authorized_keys</span>
</pre></div>
<h3 id="lsof">lsof</h3>
<p>列出系统中开放端口及运行在端口上的服务</p>
<div class="monokai"><pre><span class="code-line"><span></span>lsof -i</span>
</pre></div>
<p>配合grep, 获取需要的信息</p>
<h3 id="netstat">netstat</h3>
<p>查看开放端口和服务</p>
<div class="monokai"><pre><span class="code-line"><span></span>netstat -tnp</span>
</pre></div>
<h2 id="ci-pan-he-xi-tong_1">磁盘和系统</h2>
<h3 id="du">du</h3>
<p>du = disk usage</p>
<p>估计文件的空间占用。 逐层统计文件（例如以递归方式）并输出摘要。</p>
<p>查看占用磁盘空间</p>
<div class="monokai"><pre><span class="code-line"><span></span>du FILENAME1 FILENAME2</span>
</pre></div>
<p>查看目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>du -a dir</span>
</pre></div>
<p>以KB,MB或块为单位展示</p>
<div class="monokai"><pre><span class="code-line"><span></span>du -h FILENAME1</span>
</pre></div>
<p>显示总计情况</p>
<div class="monokai"><pre><span class="code-line"><span></span>du -c FILENAME1</span>
</pre></div>
<p>只显示合计</p>
<div class="monokai"><pre><span class="code-line"><span></span>du -s FILENAME1</span>
</pre></div>
<p>以特定单位打印</p>
<div class="monokai"><pre><span class="code-line"><span></span>du -b/-k/-m/-B FILES</span>
</pre></div>
<p>排除部分文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>du --exclude "*.txt" DIR</span>
<span class="code-line">   --exclude-from EXCLUDE.txt DIR</span>
</pre></div>
<p>指定最深层级</p>
<div class="monokai"><pre><span class="code-line"><span></span>du --max-depth 2 DIR</span>
</pre></div>
<p>指定目录最大的10个文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>du -ak S_DIR | sort -nrk 1 | head</span>
</pre></div>
<h3 id="df">df</h3>
<p>df = disk free</p>
<p>报告系统的磁盘使用情况。在跟踪磁盘使用情况方面对于普通用户和系统管理员都很有用。 ‘df‘ 通过检查目录大小工作，但这一数值仅当文件关闭时才得到更新。</p>
<p>查看磁盘可用空间</p>
<div class="monokai"><pre><span class="code-line"><span></span>df</span>
<span class="code-line">df -h</span>
</pre></div>
<h3 id="time">time</h3>
<p>计算命令执行时间</p>
<div class="monokai"><pre><span class="code-line"><span></span>time COMMAND</span>
<span class="code-line"></span>
<span class="code-line">real 挂钟时间, 从开始执行到结束的时间</span>
<span class="code-line">user 进程花费在用户模式中的cpu时间, 真正用于执行进程所花得时间</span>
<span class="code-line">sys  进程花费在内核模式中的cpu时间</span>
</pre></div>
<p>写入文件</p>
<div class="monokai"><pre><span class="code-line"><span></span>time -o output.txt COMMAND</span>
<span class="code-line">time -a output.txt COMMAND #追加</span>
</pre></div>
<p>格式化输出</p>
<div class="monokai"><pre><span class="code-line"><span></span>time -f "Time: %U"  -a -o timing.log uname</span>
<span class="code-line">real %e</span>
<span class="code-line">user %U</span>
<span class="code-line">sys %S</span>
</pre></div>
<h3 id="who">who</h3>
<p>获取当前用户登陆信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>who / w</span>
</pre></div>
<p>当前登陆主机的用户列表</p>
<div class="monokai"><pre><span class="code-line"><span></span>users</span>
</pre></div>
<h3 id="uptime">uptime</h3>
<p>查看系统已经通电运行多长时间了</p>
<div class="monokai"><pre><span class="code-line"><span></span>uptime</span>
<span class="code-line">#也可以看到负载</span>
</pre></div>
<h3 id="last">last</h3>
<p>显示上次用户登录信息- 前一次启动会话信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>last</span>
</pre></div>
<p>获取单个用户</p>
<div class="monokai"><pre><span class="code-line"><span></span>last USER</span>
</pre></div>
<h3 id="watch">watch</h3>
<p>在终端中以固定间隔监视命令输出</p>
<div class="monokai"><pre><span class="code-line"><span></span>#default 2s</span>
<span class="code-line">watch ls</span>
<span class="code-line"></span>
<span class="code-line"># 5s</span>
<span class="code-line">watch -n 5 ls</span>
</pre></div>
<p>颜色标示</p>
<div class="monokai"><pre><span class="code-line"><span></span>watch -d 'COMMAND'</span>
</pre></div>
<h2 id="jin-cheng-he-xian-cheng_1">进程和线程</h2>
<h3 id="ps">ps</h3>
<p>ps命令给出正在运行的某个进程的状态，每个进程有特定的id成为PID。</p>
<p>ps命令主要查看系统中进程的状态</p>
<div class="monokai"><pre><span class="code-line"><span></span>USER              PID  %CPU %MEM      VSZ    RSS   TT  STAT STARTED      TIME COMMAND</span>
<span class="code-line">USER表示启动进程用户</span>
<span class="code-line">PID表示进程标志号</span>
<span class="code-line"></span>
<span class="code-line">%CPU表示运行该进程占用CPU的时间与该进程总的运行时间的比例</span>
<span class="code-line">%MEM表示该进程占用内存和总内存的比例。</span>
<span class="code-line"></span>
<span class="code-line">VSZ表示占用的虚拟内存大小，以KB为单位。</span>
<span class="code-line">RSS为进程占用的物理内存值，以KB为单位。</span>
<span class="code-line"></span>
<span class="code-line">TTY表示该进程建立时所对应的终端，"?"表示该进程不占用终端。</span>
<span class="code-line">STAT表示进程的运行状态，包括以下几种代码：</span>
<span class="code-line">    D，不可中断的睡眠；</span>
<span class="code-line">    R，就绪（在可运行队列中）；</span>
<span class="code-line">    S，睡眠；</span>
<span class="code-line">    T，被跟踪或停止；</span>
<span class="code-line">    Z，终止（僵死）的进程，Z不存在，但暂时无法消除；</span>
<span class="code-line">    W，没有足够的内存分页可分配；&lt;高优先序的进程；</span>
<span class="code-line">    N，低优先序的进程；</span>
<span class="code-line">    L，有内存分页分配并锁在内存体内（实时系统或I/O）。</span>
<span class="code-line"></span>
<span class="code-line">START为进程开始时间。</span>
<span class="code-line">TIME为执行的时间。</span>
<span class="code-line">COMMAND是对应的命令名。</span>
</pre></div>
<p>查看进程信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>#当前终端</span>
<span class="code-line">ps</span>
<span class="code-line"></span>
<span class="code-line">PID TTY TIME CMD</span>
<span class="code-line">PID  进程ID</span>
<span class="code-line">TTY  终端</span>
<span class="code-line">TIME 进程启动后过去的时间</span>
<span class="code-line">CMD  进程对应的命令</span>
</pre></div>
<p>显示更多信息</p>
<div class="monokai"><pre><span class="code-line"><span></span>#当前终端</span>
<span class="code-line">ps -f</span>
</pre></div>
<p>查看所有进程</p>
<div class="monokai"><pre><span class="code-line"><span></span>ps aux</span>
<span class="code-line">ps -ef</span>
</pre></div>
<p>查看某个用户的所有进程</p>
<div class="monokai"><pre><span class="code-line"><span></span>ps U ken</span>
</pre></div>
<p>命令格式</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="n">ps</span> <span class="p">[</span><span class="n">OTHER</span> <span class="n">OPTIONS</span><span class="p">]</span> <span class="o">-</span><span class="n">o</span> <span class="n">par1</span><span class="p">,</span><span class="n">par2</span><span class="p">,</span><span class="n">par3</span></span>
<span class="code-line"><span class="n">ps</span> <span class="o">-</span><span class="n">eo</span> <span class="n">comm</span><span class="p">,</span><span class="n">pcpu</span> <span class="o">|</span> <span class="n">head</span></span>
<span class="code-line"><span class="n">pmem</span> <span class="err">内存使用率，</span><span class="n">comm</span><span class="err">可执行文件名</span><span class="p">,</span><span class="n">user</span><span class="err">启动进程的用户</span><span class="p">,</span><span class="n">etime</span><span class="err">启动后度过的时间</span></span>
</pre></div>
<p>设置升序降序</p>
<div class="monokai"><pre><span class="code-line"><span></span>ps -eo comm,pcpu --sort -pcpu | head</span>
<span class="code-line">+升序，-降序</span>
</pre></div>
<p>找出给定命令名对应进程ID</p>
<div class="monokai"><pre><span class="code-line"><span></span>ps -C COMMAND_NAME</span>
<span class="code-line">ps -C bash -o pid=</span>
</pre></div>
<p>进程线程相关</p>
<div class="monokai"><pre><span class="code-line"><span></span>ps -eLf --sort -nlwp | head</span>
</pre></div>
<p>查看子进程树</p>
<div class="monokai"><pre><span class="code-line"><span></span>ps axwef</span>
</pre></div>
<p>注意：当你要知道有哪些进程在运行或者需要知道想杀死的进程PID时ps命令很管用。你可以把它与‘grep‘合用来查询指定的输出结果，例如：</p>
<div class="monokai"><pre><span class="code-line"><span></span># ps -A | grep -i ssh</span>
</pre></div>
<h3 id="pgrep_1">pgrep</h3>
<p>pgrep只需要命令名的一部分, ps需要准确的全名</p>
<p>基本用法</p>
<div class="monokai"><pre><span class="code-line"><span></span>pgrep bash</span>
</pre></div>
<p>指定进程的用户</p>
<div class="monokai"><pre><span class="code-line"><span></span>pgrep -u root,slynux COMMAND</span>
</pre></div>
<p>返回匹配进程数</p>
<div class="monokai"><pre><span class="code-line"><span></span>pgrep -c COMANND</span>
</pre></div>
<h3 id="top">top</h3>
<p>查看占用cpu最多的进程列表</p>
<div class="monokai"><pre><span class="code-line"><span></span>top</span>
</pre></div>
<h3 id="kill">kill</h3>
<p>kill是用来杀死已经无关紧要或者没有响应的进程,杀死一个进程需要知道进程的PID</p>
<p>列出可用信号</p>
<div class="monokai"><pre><span class="code-line"><span></span>kill -l</span>
</pre></div>
<p>终止一个进程</p>
<div class="monokai"><pre><span class="code-line"><span></span>kill PROCESS_ID_LIST</span>
</pre></div>
<p>强杀进程</p>
<div class="monokai"><pre><span class="code-line"><span></span>kill -9 PROCESS_ID</span>
</pre></div>
<p>杀死一组命令</p>
<div class="monokai"><pre><span class="code-line"><span></span>killall process_name</span>
<span class="code-line">killall -9 process_name</span>
<span class="code-line"></span>
<span class="code-line">指定用户</span>
<span class="code-line">killall -u USERNAME process_name</span>
</pre></div>
<h3 id="pkill">pkill</h3>
<p>杀，接受进程名</p>
<div class="monokai"><pre><span class="code-line"><span></span>pkill process_name</span>
<span class="code-line">pkill -s SIGNAL process_name</span>
</pre></div>
<h3 id="which">which</h3>
<p>查找PATH下某个命令位置</p>
<div class="monokai"><pre><span class="code-line"><span></span>which ls</span>
</pre></div>
<h3 id="whereis">whereis</h3>
<p>whereis的作用是用来定位命令的二进制文件\资源\或者帮助页.举例来说,获得ls和kill命令的二进制文件/资源以及帮助页:</p>
<div class="monokai"><pre><span class="code-line"><span></span>whereis ls</span>
<span class="code-line">whereis kill</span>
</pre></div>
<p>类似which，多了命令手册位置，源代码位置</p>
<p>注意:当需要知道二进制文件保存位置时有用.</p>
<h3 id="file_1">file</h3>
<p>确定文件类型</p>
<h3 id="whatis">whatis</h3>
<p>对命令的简短描述</p>
<h3 id="hostname">hostname</h3>
<p>当前主机名</p>
<h3 id="uname">uname</h3>
<div class="monokai"><pre><span class="code-line"><span></span>主机名</span>
<span class="code-line">uname -n</span>
<span class="code-line"></span>
<span class="code-line">#内核版本，硬件架构等</span>
<span class="code-line">uname -a</span>
<span class="code-line"></span>
<span class="code-line">#内核发行版本</span>
<span class="code-line">uname -r</span>
<span class="code-line"></span>
<span class="code-line">主机类型(32位/64位)</span>
<span class="code-line">uname -m</span>
<span class="code-line"></span>
<span class="code-line">cpu相关信息</span>
<span class="code-line">cat /proc/cpuinfo</span>
<span class="code-line"></span>
<span class="code-line">内存信息</span>
<span class="code-line">cat /proc/meminfo</span>
</pre></div>
<p>例子</p>
<div class="monokai"><pre><span class="code-line"><span></span>#uname -a</span>
<span class="code-line">Linux tecmint 3.8.0-19-generic #30-Ubuntu SMP Wed May 1 16:36:13 UTC 2013 i686 i686 i686 GNU/Linux</span>
<span class="code-line"></span>
<span class="code-line">1. “Linux“: 机器的内核名</span>
<span class="code-line">2. “tecmint“: 机器的分支名</span>
<span class="code-line">3. “3.8.0-19-generic“: 内核发布版本</span>
<span class="code-line">4. “#30-Ubuntu SMP“: 内核版本</span>
<span class="code-line">5. “i686“: 处理器架构</span>
<span class="code-line">6. “GNU/Linux“: 操作系统名</span>
</pre></div>
<h3 id="crontab">crontab</h3>
<p>格式</p>
<div class="monokai"><pre><span class="code-line"><span></span>* * * * * cmd</span>
<span class="code-line">分钟(0-59)，小时(0-23)，天(1-31)，月份(1-12)，工作日(0-6)</span>
<span class="code-line"></span>
<span class="code-line">A,B  A and B</span>
<span class="code-line">*/C  every C</span>
</pre></div>
<p>查看</p>
<div class="monokai"><pre><span class="code-line"><span></span>crontab -l</span>
<span class="code-line">crontab -l -u slynux</span>
</pre></div>
<p>编辑</p>
<div class="monokai"><pre><span class="code-line"><span></span>crontab -e</span>
</pre></div>
<p>移除</p>
<div class="monokai"><pre><span class="code-line"><span></span>crontab -r</span>
<span class="code-line">crontab -u slynux -r</span>
</pre></div>
<p>可以在crontab 中加入环境变量</p>
<h3 id="getopts">getopts</h3>
<p>命令行参数处理</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">while getopts :f:vql opt</span></span>
<span class="code-line"><span class="x">do</span></span>
<span class="code-line"><span class="x">    case </span><span class="p">$</span><span class="nv">opt</span><span class="x"> in</span></span>
<span class="code-line"><span class="x">    f)  file=</span><span class="p">$</span><span class="nv">OPTARG</span><span class="x"></span></span>
<span class="code-line"><span class="x">        ;;</span></span>
<span class="code-line"><span class="x">    v)  verbose=true</span></span>
<span class="code-line"><span class="x">        ;;</span></span>
<span class="code-line"><span class="x">    ....</span></span>
</pre></div>
<h3 id="history">history</h3>
<p>“history”命令就是历史记录。它显示了在终端中所执行过的所有命令的历史</p>
<div class="monokai"><pre><span class="code-line"><span></span>history</span>
</pre></div>
<p>注意：按住“CTRL + R”就可以搜索已经执行过的命令，它可以你写命令时自动补全</p>
<h3 id="sudo">sudo</h3>
<p>“sudo”(super user do)命令允许授权用户执行超级用户或者其它用户的命令。通过在sudoers列表的安全策略来指定。</p>
<p>注意：sudo 允许用户借用超级用户的权限，然而”su”命令实际上是允许用户以超级用户登录。所以sudo比su更安全。
并不建议使用sudo或者su来处理日常用途，因为它可能导致严重的错误如果你意外的做错了事，这就是为什么在linux社区流行一句话：</p>
<p>“To err is human, but to really foul up everything, you need root password.”
“人非圣贤孰能无过，但是拥有root密码就真的万劫不复了。”</p>
<h3 id="cal">cal</h3>
<p>“cal”（Calender），它用来显示当前月份或者未来或者过去任何年份中的月份</p>
<div class="monokai"><pre><span class="code-line"><span></span>cal</span>
<span class="code-line">cal 02 1835</span>
</pre></div>
<h3 id="cp">cp</h3>
<p>“copy”就是复制。它会从一个地方复制一个文件到另外一个地方</p>
<div class="monokai"><pre><span class="code-line"><span></span>cp file1 file2</span>
<span class="code-line">cp -r dir1 dir2</span>
</pre></div>
<p>快速备份一个文件：</p>
<div class="monokai"><pre><span class="code-line"><span></span>cp some_file_name{,.bkp}</span>
</pre></div>
<p>注意： cp，在shell脚本中是最常用的一个命令，而且它可以使用通配符（在前面一块中有所描述），来定制所需的文件的复制。</p>
<h3 id="mv">mv</h3>
<p>“mv”命令将一个地方的文件移动到另外一个地方去。</p>
<p>“mv”命令将一个地方的文件移动到另外一个地方去。</p>
<h3 id="pwd">pwd</h3>
<p>“pwd”（print working directory），在终端中显示当前工作目录的全路径。</p>
<p>注意： 这个命令并不会在脚本中经常使用，但是对于新手，当从连接到nux很久后在终端中迷失了路径，这绝对是救命稻草。</p>
<h3 id="free">free</h3>
<div class="monokai"><pre><span class="code-line"><span></span>free -m</span>
<span class="code-line">             total       used       free     shared    buffers     cached</span>
<span class="code-line">Mem:          7982       6811       1171          0        350       5114</span>
<span class="code-line">-/+ buffers/cache:       1346       6636</span>
<span class="code-line">Swap:        16935         11      16924</span>
</pre></div>
<p>显示剩余内存</p>
<div class="monokai"><pre><span class="code-line"><span></span>free -m | grep cache | awk '/[0-9]/{ print $4" MB" }'</span>
</pre></div>
<p>在这里例子中,应用程序只使用了1346MB内存,还有6636MB空闲内存可以使用.</p>
<p>一些简单的计算方法：</p>
<p>物理已用内存 = 实际已用内存 - 缓冲 - 缓存 = 6811M - 350M - 5114M</p>
<p>物理空闲内存 = 总物理内存 - 实际已用内存 + 缓冲 + 缓存</p>
<p>应用程序可用空闲内存 = 总物理内存 - 实际已用内存</p>
<p>应用程序已用内存 = 实际已用内存 - 缓冲 - 缓存</p>
<p>原始解释：转至互联网：
Linux的基本原则是没有资源应该被浪费.因此核心会使用尽可能多的RAM,来缓存来自本地和远程的文件系统的信息.系统做读写操作的时候,会将与当前运行的进程相关的数据尽量存储在RAM里.系统报告的缓存是缓冲和页缓存两者之和.缓存并不是在进程结束的时候被回收(你可能很快会启动另外一个进程,需要同样的数据),而是随需回收–比如,当你启动一个需要大量内存的进程时,Linux核心会从内存中回收缓存,将得到的内存分配给新的进程.</p>
<p>有些区域,比如匿名内存映射(mmps)和共享内存区域,它们被报告为缓存,但不是被核心直接释放.一般的缓存不映射到进程的地址空间,仅仅是简单的核心映射,而这些特别的缓存映射到所有挂接到它们上面的进程.</p>
<h3 id="eval">eval</h3>
<div class="monokai"><pre><span class="code-line"><span></span>eval "ls -l"</span>
</pre></div>
<h3 id="basename">basename</h3>
<p>获取路径中文件部分</p>
<div class="monokai"><pre><span class="code-line"><span></span>basename resolv.conf #resolv.conf</span>
<span class="code-line">basename /etc/resolv.conf # resolv.conf</span>
</pre></div>
<h3 id="cmp">cmp</h3>
<p>比较两个任意类型的文件并将结果输出至标准输出。如果两个文件相同， ‘cmp‘默认返回0；如果不同，将显示不同的字节数和第一处不同的位置。</p>
<div class="monokai"><pre><span class="code-line"><span></span>cmp file1 file2</span>
<span class="code-line">diff file1 file2</span>
</pre></div>
<h3 id="rm">rm</h3>
<p>‘rm’ 标准移除命令。 rm 可以用来删除文件和目录</p>
<div class="monokai"><pre><span class="code-line"><span></span>rm file1</span>
<span class="code-line">rm -r dir1  #递归删除空目录</span>
</pre></div>
<p>强删</p>
<div class="monokai"><pre><span class="code-line"><span></span>rm -rf fileordir</span>
</pre></div>
<p>警告: ”rm -rf” 命令是一个破坏性的命令,假如你不小心删除一个错误的目录。
一旦你使用’rm -rf’ 删除一个目录,在目录中所有的文件包括目录本身会被永久的删除,所以使用这个命令要非常小心。</p>
<h3 id="service">service</h3>
<p>‘service‘命令控制服务的启动、停止和重启，它让你能够不重启整个系统就可以让配置生效以开启、停止或者重启某个服务。</p>
<p>注意：要想使用service命令，进程的脚本必须放在‘/etc/init.d‘，并且路径必须在指定的位置。
如果要运行“service apache2 start”实际上实在执行“service /etc/init.d/apache2 start”.</p>
<h3 id="man">man</h3>
<p>‘man‘是系统帮助页。Man提供命令所有选项及用法的在线文档。几乎所有的命令都有它们的帮助页</p>
<div class="monokai"><pre><span class="code-line"><span></span>man thecommand</span>
</pre></div>
<p>注意：系统帮助页是为了命令的使用和学习而设计的。</p>
<h3 id="passwd">passwd</h3>
<p>这是一个很重要的命令，在终端中用来改变自己密码很有用。显然的，因为安全的原因，你需要知道当前的密码。</p>
<h3 id="gcc">gcc</h3>
<p>gcc 是Linux环境下C语言的内建编译器。下面是一个简单的C程序，在桌面上保存为Hello.c （记住必须要有‘.c‘扩展名</p>
<div class="monokai"><pre><span class="code-line"><span></span>gcc Hello.c</span>
<span class="code-line">./a.out</span>
<span class="code-line">gcc -o Hello Hello.c</span>
<span class="code-line">./Hello</span>
</pre></div>
<p>注意: 编译C程序时，输出会自动保存到一个名为“a.out”的新文件，因此每次编译C程序 “a.out”都会被修改。
因此编译期间最好定义输出文件名.，这样就不会有覆盖输出文件的风险了。</p>
<h3 id="g">g++</h3>
<p>g++是C++的内建编译器</p>
<div class="monokai"><pre><span class="code-line"><span></span>g++ Add.cpp</span>
<span class="code-line">./a.out</span>
<span class="code-line">g++ -o Add Add.cpp</span>
<span class="code-line">./Add</span>
</pre></div>
<h3 id="java">java</h3>
<p>Java 是世界上使用最广泛的编程语言之一. 它也被认为是高效, 安全和可靠的编程语言. 现在大多数基于网络的服务都使用Java实现.</p>
<div class="monokai"><pre><span class="code-line"><span></span>javac tecmint.java</span>
<span class="code-line">java tecmint</span>
</pre></div>
<p>注意: 几乎所有的Linux发行版都带有gcc编译器, 大多数发行版都内建了g++ 和 java 编译器, 有些也可能没有. 你可以用apt 或 yum 安装需要的包.</p>
<h3 id="guan-yu-devnull">关于/dev/null</h3>
<p>特别有用的特殊文件，位桶，传送到此文件的数据都会被系统丢弃。</p>
<h3 id="yu-yan-ji-luan-ma">语言及乱码</h3>
<p>查看变量值</p>
<div class="monokai"><pre><span class="code-line"><span></span><span class="x">echo </span><span class="p">$</span><span class="nv">LANG</span><span class="x">   未设置任何LC_XXX时使用的默认值</span></span>
<span class="code-line"><span class="x">echo </span><span class="p">$</span><span class="nv">LC_ALL</span><span class="x"> 覆盖所有LC_XXX变量，总控开关</span></span>
</pre></div>
<p>好的做法是，避免为任何LC_XXX变量赋值，使用LC_ALL和LANG来控制</p>
<p>避免乱码：从编辑器到语言，再到系统，统一编码为UTF-8</p>
<h3 id="shellde-ban-ben">shell的版本</h3>
<div class="monokai"><pre><span class="code-line"><span></span>bash --version</span>
</pre></div>
    </section>

    <section id="copyright">
        <div class="copyright">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        </div>

        <div class="donation">
            <center>
                <div style="width: 70%;">
                    <img src="/imgs/life/donation_w.png" style=""/>
                    <strong>
                        <div style="text-align:center;">
                            如果我的文章或项目对你有所帮助, 可以扫码进行小额捐赠<br>
                            如果有主机需求, 可点下方vultr进入注册, 带小尾巴:)<br>
                            如果要加广告位, 请邮件联系<br>
                        </ol>
                    </strong>
                </div>
            </center>

        </div>
    </section>


    <section id="neighbors">
        <div>
                        <a class="left" href="http://www.wklken.me/posts/2013/07/04/summary-07-worktwoyear.html">
                            上一篇:  工作两周年小结
                        </a>
                        <a class="right" href="http://www.wklken.me/posts/2013/07/18/python-translate-yield.html">
                            下一篇: [翻译]Python中yield的解释
                        </a>
        </div>
    </section>

    <section id="ad">
        <!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
        <!-- [> blog_ad_003 <] -->
        <!-- <ins class="adsbygoogle" -->
            <!-- style="display:block" -->
            <!-- data-ad-client="ca-pub-7635941258020589" -->
            <!-- data-ad-slot="7030416955" -->
            <!-- data-ad-format="auto"></ins> -->
        <!-- <script> -->
        <!-- (adsbygoogle = window.adsbygoogle || []).push({}); -->
        <!-- </script> -->

        <a href='http://www.vultr.com/?ref=6847203' target="_blank">
        <img src="/imgs/ads/vultr.png"> </img>
        </a>
    </section>



<section id="comments">
        <div class="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "posts/2013/07/04/note-of-linux-shell-scripting-cookbook.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://wklken.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            </div>
</section>



</article>
        </section><!--end #main-->

            <footer class="row">
                <div class="large-12 columns">
                    <p>
                            Copyright © 2015 wklken <br>
                            Hosted on <a href="http://www.vultr.com/?ref=6954153-3B"> vultr </a>. Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>.
                            <!-- Hosted on <a href="http://www.vultr.com/?ref=6847203"> vultr </a> Also <a href="https://www.digitalocean.com/?refcode=8ee73f2c47ce"> DigitalOcean </a>. Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>. -->
                    </p>
                </div>
            </footer>

            </div>
        </div>

        <section id="extras" class="body">
        </section><!-- /#extras -->



<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/jquery-scrollUp/2.1.0/jquery.scrollUp.min.js"></script>
<script src="http://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script>
    $(function(){
        $.scrollUp({
              scrollText: '', // Text for element, can contain HTML
            });
    });
</script>


<script type="text/javascript">
  /* var Swiftype = window.Swiftype || {}; */
  /* Swiftype.searchSearchFields = { */
    /* "page": ["title^10", "body"] */
  /* }; */

  /* (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){ */
  /* (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t); */
  /* e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e); */
  /* })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st'); */

  /* _st('install','v6K-_DamCeHvwX6z3o2F'); */
</script>



    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>




<div id="share">
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["mshare","tsina","weixin","douban","meilishuo","mogujie","youdao","sdo","mail","twi","copy","print"],"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"5","bdPos":"right","bdTop":"96.5"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>



<script  src="http://www.wklken.me/theme/js/scroll-header.js" type="text/javascript"></script>




</body>
</html>